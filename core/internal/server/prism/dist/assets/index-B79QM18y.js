import{j as e,u as ne,a as Y,b as oe,Q as et,c as tt}from"./query-vendor-BzpeYD3v.js";import{a as rt,r as c,u as nt,N as we,O as ot,B as st,R as it,b as O,c as lt}from"./react-vendor-hR_Jyj4M.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Ne,Se=rt;Ne=Se.createRoot,Se.hydrateRoot;const at=c.createContext(null),he={didCatch:!1,error:null};class dt extends c.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=he}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var n,l,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];(n=(l=this.props).onReset)===null||n===void 0||n.call(l,{args:i,reason:"imperative-api"}),this.setState(he)}}componentDidCatch(o,n){var l,r;(l=(r=this.props).onError)===null||l===void 0||l.call(r,o,n)}componentDidUpdate(o,n){const{didCatch:l}=this.state,{resetKeys:r}=this.props;if(l&&n.error!==null&&ct(o.resetKeys,r)){var i,s;(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{next:r,prev:o.resetKeys,reason:"keys"}),this.setState(he)}}render(){const{children:o,fallbackRender:n,FallbackComponent:l,fallback:r}=this.props,{didCatch:i,error:s}=this.state;let g=o;if(i){const p={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")g=n(p);else if(l)g=c.createElement(l,p);else if(r!==void 0)g=r;else throw s}return c.createElement(at.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},g)}}function ct(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==o.length||t.some((n,l)=>!Object.is(n,o[l]))}/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,n,l)=>l?l.toUpperCase():n.toLowerCase()),Ee=t=>{const o=xt(t);return o.charAt(0).toUpperCase()+o.slice(1)},Re=(...t)=>t.filter((o,n,l)=>!!o&&o.trim()!==""&&l.indexOf(o)===n).join(" ").trim(),ut=t=>{for(const o in t)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ht={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=c.forwardRef(({color:t="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:r="",children:i,iconNode:s,...g},p)=>c.createElement("svg",{ref:p,...ht,width:o,height:o,stroke:t,strokeWidth:l?Number(n)*24/Number(o):n,className:Re("lucide",r),...!i&&!ut(g)&&{"aria-hidden":"true"},...g},[...s.map(([j,y])=>c.createElement(j,y)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(t,o)=>{const n=c.forwardRef(({className:l,...r},i)=>c.createElement(gt,{ref:i,iconNode:o,className:Re(`lucide-${pt(Ee(t))}`,`lucide-${t}`,l),...r}));return n.displayName=Ee(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ft=F("activity",yt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bt=F("arrow-right",mt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],vt=F("book-open",jt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kt=F("bot",Ft);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Te=F("box",Ct);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],se=F("brain",wt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Me=F("bug",St);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zt=F("calendar",Et);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ie=F("check",Bt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q=F("chevron-down",Dt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ge=F("chevron-right",At);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Rt=F("chevron-up",Nt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],J=F("circle-alert",Tt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ye=F("circle-check-big",Mt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_t=F("circle-x",It);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fe=F("clock",Wt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pt=F("compass",Lt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ot=F("copy",$t);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],qt=F("database",Ht);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],_e=F("file-search",Vt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],me=F("file-text",Ut);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Qt=F("folder-open",Kt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],be=F("folder",Gt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],je=F("graduation-cap",Yt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Xt=F("hard-drive",Jt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],er=F("info",Zt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ie=F("layers",tr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],nr=F("layout-dashboard",rr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],L=F("loader-circle",or);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$=F("message-square",sr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],lr=F("moon",ir);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dr=F("palette",ar);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],ze=F("panel-left-close",cr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],We=F("pen",pr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],H=F("plus",xr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ve=F("refresh-cw",ur);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Le=F("rotate-ccw",hr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yr=F("save",gr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Pe=F("search",fr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],br=F("send",mr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],vr=F("server",jr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kr=F("settings",Fr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$e=F("shield",Cr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],U=F("sparkles",wr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Er=F("sun",Sr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],le=F("terminal",zr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],X=F("trash-2",Br);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ar=F("trending-up",Dr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Oe=F("type",Nr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Tr=F("upload",Rr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],He=F("user",Mr);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],te=F("users",Ir);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],M=F("x",_r);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Z=F("zap",Wr),Lr=({isConnected:t=!1,port:o=7890})=>{const[n,l]=c.useState(!1),[r,i]=c.useState("active-passive"),[s,g]=c.useState(!1),[p,j]=c.useState(()=>{const d=localStorage.getItem("prism_theme");return d?d==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),y=async()=>{l(!0),await new Promise(d=>setTimeout(d,1e3)),l(!1)},a=()=>{const d=!p;j(d),localStorage.setItem("prism_theme",d?"dark":"light"),document.documentElement.setAttribute("data-theme",d?"dark":"light")};return e.jsxs("header",{style:{height:"52px",backgroundColor:"#FFFFFF",borderBottom:"1px solid #E5E5E7",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",flexShrink:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)"},children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),e.jsx("span",{style:{fontWeight:600,color:"#1D1D1F",fontSize:"16px"},children:"Project: Cortex"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",backgroundColor:t?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"20px",border:`1px solid ${t?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)"}`},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:t?"#22C55E":"#EF4444",boxShadow:t?"0 0 8px #22C55E":"none"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,color:t?"#166534":"#B91C1C"},children:t?`Connected :${o}`:"Disconnected"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{onClick:()=>g(!s),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",backgroundColor:r==="disabled"?"#F3F4F6":r==="active-aggressive"?"#DCFCE7":"#FEF3C7",border:`1px solid ${r==="disabled"?"#D1D5DB":r==="active-aggressive"?"#86EFAC":"#FCD34D"}`,borderRadius:"20px",cursor:"pointer",transition:"all 0.15s ease"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:r==="disabled"?"#9CA3AF":r==="active-aggressive"?"#22C55E":"#F59E0B",animation:r!=="disabled"?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:r==="disabled"?"#6B7280":r==="active-aggressive"?"#166534":"#92400E"},children:r==="disabled"?"Learning: Disabled":r==="active-aggressive"?"Learning: Active":"Learning: Passive"}),e.jsx(Q,{size:14,style:{color:r==="disabled"?"#9CA3AF":r==="active-aggressive"?"#22C55E":"#F59E0B",transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.15s ease"}})]}),s&&e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,minWidth:"280px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #E5E5E7"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1D1D1F"},children:"Learning Mode"}),e.jsx("div",{style:{fontSize:"12px",color:"#86868B",marginTop:"2px"},children:"How Cortex learns from your interactions"})]}),e.jsxs("div",{style:{padding:"8px"},children:[e.jsxs("div",{onClick:()=>{i("active-passive"),g(!1)},style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"10px 12px",borderRadius:"8px",cursor:"pointer",backgroundColor:r==="active-passive"?"#FEF3C7":"transparent"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#FEF3C7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(je,{size:16,style:{color:"#F59E0B"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:500,color:"#1D1D1F"},children:["Passive Mode",r==="active-passive"&&e.jsx("span",{style:{marginLeft:"8px",color:"#F59E0B",fontSize:"11px"},children:"Active"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#86868B",marginTop:"2px"},children:"Learns quietly in the background"})]})]}),e.jsxs("div",{onClick:()=>{i("active-aggressive"),g(!1)},style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"10px 12px",borderRadius:"8px",cursor:"pointer",backgroundColor:r==="active-aggressive"?"#DCFCE7":"transparent"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#DCFCE7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Z,{size:16,style:{color:"#22C55E"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:500,color:"#1D1D1F"},children:["Active Mode",r==="active-aggressive"&&e.jsx("span",{style:{marginLeft:"8px",color:"#22C55E",fontSize:"11px"},children:"Active"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#86868B",marginTop:"2px"},children:"Actively suggests improvements"})]})]}),e.jsxs("div",{onClick:()=>{i("disabled"),g(!1)},style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"10px 12px",borderRadius:"8px",cursor:"pointer",backgroundColor:r==="disabled"?"#F3F4F6":"transparent"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_t,{size:16,style:{color:"#9CA3AF"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"13px",fontWeight:500,color:"#1D1D1F"},children:["Disabled",r==="disabled"&&e.jsx("span",{style:{marginLeft:"8px",color:"#9CA3AF",fontSize:"11px"},children:"Off"})]}),e.jsx("div",{style:{fontSize:"12px",color:"#86868B",marginTop:"2px"},children:"No learning or pattern extraction"})]})]})]}),e.jsx("div",{style:{padding:"10px 16px",borderTop:"1px solid #E5E5E7",backgroundColor:"#FAFAFA"},children:e.jsxs("div",{style:{fontSize:"11px",color:"#86868B",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(se,{size:12}),r!=="disabled"?"Cortex is learning from your workflow":"Enable learning to improve AI suggestions"]})})]})]}),e.jsx("button",{onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",backgroundColor:p?"#374151":"#F3F4F6",border:`1px solid ${p?"#4B5563":"#E5E7EB"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},title:p?"Switch to light mode":"Switch to dark mode",children:p?e.jsx(Er,{size:18,style:{color:"#FCD34D"}}):e.jsx(lr,{size:18,style:{color:"#6B7280"}})}),e.jsxs("button",{onClick:y,disabled:n,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:n?"#93C5FD":"#3B82F6",color:"#FFFFFF",fontSize:"14px",fontWeight:500,borderRadius:"8px",border:"none",cursor:n?"wait":"pointer",opacity:n?.7:1,transition:"all 0.15s ease"},children:[n?e.jsx(L,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx(ve,{size:14}),n?"Syncing...":"Sync"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",cursor:"pointer"},children:e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#E5E5E7",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(He,{size:16,style:{color:"#6B7280"}})})})]})]})},Pr=({onSettingsClick:t})=>{const o=nt(),n=[{id:"dashboard",icon:nr,label:"Dashboard",path:"/"},{id:"chat",icon:$,label:"Chat",path:"/chat"},{id:"facets",icon:ie,label:"Facets",path:"/facets"},{id:"personas",icon:te,label:"Personas",path:"/personas"},{id:"knowledge",icon:se,label:"Knowledge",path:"/knowledge"},{id:"context",icon:Pt,label:"Context",path:"/context"},{id:"ai",icon:U,label:"AI",path:"/ai"}],l=r=>r==="/"?o.pathname==="/":o.pathname.startsWith(r);return e.jsxs("div",{style:{width:"72px",backgroundColor:"#F0F0F2",borderRight:"1px solid #E5E5E7",display:"flex",flexDirection:"column",alignItems:"center",padding:"12px 0",flexShrink:0},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"100%",padding:"0 8px"},children:n.map(r=>{const i=l(r.path),s=r.icon;return e.jsxs(we,{to:r.path,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px 6px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.15s ease",backgroundColor:i?"#FFFFFF":"transparent",color:i?"#3B82F6":"#6B7280",boxShadow:i?"0 1px 3px rgba(0,0,0,0.1)":"none",textDecoration:"none"},onMouseEnter:g=>{i||(g.currentTarget.style.backgroundColor="rgba(255,255,255,0.5)")},onMouseLeave:g=>{i||(g.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(s,{size:20,strokeWidth:i?2:1.5}),e.jsx("span",{style:{fontSize:"10px",marginTop:"4px",fontWeight:500},children:r.label})]},r.id)})}),e.jsx("div",{style:{marginTop:"auto",width:"100%",padding:"0 8px"},children:e.jsxs(we,{to:"/settings",onClick:r=>{t&&(r.preventDefault(),t())},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px 6px",borderRadius:"8px",border:"none",cursor:"pointer",width:"100%",backgroundColor:o.pathname==="/settings"?"#FFFFFF":"transparent",color:o.pathname==="/settings"?"#3B82F6":"#6B7280",transition:"all 0.15s ease",textDecoration:"none"},onMouseEnter:r=>{o.pathname!=="/settings"&&(r.currentTarget.style.backgroundColor="rgba(255,255,255,0.5)",r.currentTarget.style.color="#3B82F6")},onMouseLeave:r=>{o.pathname!=="/settings"&&(r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="#6B7280")},children:[e.jsx(kr,{size:20,strokeWidth:1.5}),e.jsx("span",{style:{fontSize:"10px",marginTop:"4px",fontWeight:500},children:"Settings"})]})})]})},$r=({isCollapsed:t,onToggleCollapse:o})=>{const[n,l]=c.useState({projects:!0,sessions:!0,flows:!0}),[r,i]=c.useState(!1),[s]=c.useState([{id:"1",name:"Main Terminal",type:"terminal",status:"running"},{id:"2",name:"Build Session",type:"terminal",status:"paused"}]),g=a=>{l(d=>({...d,[a]:!d[a]}))},p=a=>{switch(a){case"running":return"#22C55E";case"paused":return"#F59E0B";case"stopped":return"#9CA3AF";default:return"#9CA3AF"}},j=c.useCallback(async()=>{i(!0),await new Promise(a=>setTimeout(a,500)),i(!1)},[]),y=c.useCallback(()=>{console.log("[ProjectsSidebar] Creating new session")},[]);return t?e.jsxs("div",{style:{width:"48px",backgroundColor:"#FFFFFF",borderRight:"1px solid #E5E5E7",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,transition:"width 0.2s ease"},children:[e.jsx("div",{style:{padding:"12px 0",borderBottom:"1px solid #F0F0F2",width:"100%",display:"flex",justifyContent:"center"},children:e.jsx("button",{onClick:o,style:{background:"none",border:"none",padding:"6px",cursor:"pointer",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Expand sidebar",children:e.jsx(ze,{size:18,style:{color:"#6B7280",transform:"rotate(180deg)"}})})}),e.jsxs("div",{style:{padding:"8px 0",display:"flex",flexDirection:"column",gap:"4px",alignItems:"center"},children:[e.jsx("button",{onClick:y,style:{background:"none",border:"none",padding:"8px",cursor:"pointer",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},title:"New session",children:e.jsx(H,{size:18,style:{color:"#3B82F6"}})}),e.jsx("button",{style:{background:"none",border:"none",padding:"8px",cursor:"pointer",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Projects",children:e.jsx(be,{size:18,style:{color:"#6B7280"}})})]})]}):e.jsxs("div",{style:{width:"200px",backgroundColor:"#FFFFFF",borderRight:"1px solid #E5E5E7",display:"flex",flexDirection:"column",flexShrink:0,transition:"width 0.2s ease"},children:[e.jsx("div",{style:{padding:"12px",borderBottom:"1px solid #F0F0F2"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontWeight:600,color:"#1D1D1F",fontSize:"14px"},children:"Projects"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("button",{onClick:j,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Refresh",children:r?e.jsx(L,{size:14,style:{color:"#3B82F6",animation:"spin 1s linear infinite"}}):e.jsx(ve,{size:14,style:{color:"#9CA3AF"}})}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Collapse sidebar",children:e.jsx(ze,{size:16,style:{color:"#6B7280"}})})]})]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:[e.jsx("div",{style:{marginBottom:"4px"},children:e.jsx("div",{onClick:()=>g("projects"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",fontSize:"13px",color:"#1D1D1F",borderRadius:"6px",cursor:"pointer",transition:"background-color 0.1s ease"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:a=>a.currentTarget.style.backgroundColor="transparent",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.projects?e.jsx(Q,{size:14,style:{color:"#9CA3AF"}}):e.jsx(ge,{size:14,style:{color:"#9CA3AF"}}),e.jsx(Qt,{size:16,style:{color:"#3B82F6",flexShrink:0}}),e.jsx("span",{style:{fontWeight:600},children:"Cortex/"})]})})}),n.projects&&e.jsxs("div",{style:{marginLeft:"20px",marginBottom:"12px"},children:[e.jsx("div",{style:{padding:"6px 8px",fontSize:"12px",color:"#6B7280"},children:"internal/"}),e.jsx("div",{style:{padding:"6px 8px",fontSize:"12px",color:"#6B7280"},children:"prism/"}),e.jsx("div",{style:{padding:"6px 8px",fontSize:"12px",color:"#6B7280"},children:"cmd/"})]}),e.jsxs("div",{style:{marginBottom:"12px",borderTop:"1px solid #F0F0F2",paddingTop:"12px"},children:[e.jsxs("div",{onClick:()=>g("sessions"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",fontSize:"12px",fontWeight:600,color:"#6B7280",cursor:"pointer"},children:[e.jsxs("span",{children:["Sessions (",s.length,")"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),y()},style:{background:"none",border:"none",cursor:"pointer",padding:"2px",color:"#3B82F6"},title:"New Session",children:e.jsx(H,{size:14})}),n.sessions?e.jsx(Q,{size:14}):e.jsx(ge,{size:14})]})]}),n.sessions&&e.jsx("div",{style:{marginTop:"8px",display:"flex",flexDirection:"column",gap:"6px"},children:s.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"8px",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:d=>{d.currentTarget.style.borderColor="#3B82F6",d.currentTarget.style.backgroundColor="#EFF6FF"},onMouseLeave:d=>{d.currentTarget.style.borderColor="#E5E5E7",d.currentTarget.style.backgroundColor="#FFFFFF"},children:[e.jsx(le,{size:14,style:{color:"#6B7280",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:500,color:"#1D1D1F",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.name}),e.jsxs("div",{style:{fontSize:"10px",color:p(a.status),fontWeight:500},children:["(",a.status,")"]})]})]},a.id))})]}),e.jsxs("div",{style:{marginBottom:"12px",borderTop:"1px solid #F0F0F2",paddingTop:"12px"},children:[e.jsxs("div",{onClick:()=>g("flows"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",fontSize:"12px",fontWeight:600,color:"#6B7280",cursor:"pointer"},children:[e.jsx("span",{children:"Flows (0)"}),n.flows?e.jsx(Q,{size:14}):e.jsx(ge,{size:14})]}),n.flows&&e.jsxs("div",{style:{marginTop:"8px",padding:"8px",fontSize:"12px",color:"#9CA3AF",textAlign:"center"},children:[e.jsx(Z,{size:16,style:{marginBottom:"4px",opacity:.5}}),e.jsx("div",{children:"No flows created"})]})]})]})]})},Or=({children:t})=>{const[o,n]=c.useState(!1),[l]=c.useState(7890),[r,i]=c.useState(!1);return c.useEffect(()=>{const s=async()=>{try{const p=await fetch("/api/v1/status");n(p.ok)}catch{n(!1)}};s();const g=setInterval(s,1e4);return()=>clearInterval(g)},[]),e.jsx("div",{style:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #E8E8ED 0%, #D1D1D6 50%, #C7C7CC 100%)",padding:"24px",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", system-ui, sans-serif',boxSizing:"border-box"},children:e.jsxs("div",{style:{maxWidth:"1600px",margin:"0 auto",height:"calc(100vh - 48px)",backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx(Lr,{isConnected:o,port:l}),e.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden",backgroundColor:"#F5F5F7"},children:[e.jsx(Pr,{}),e.jsx($r,{isCollapsed:r,onToggleCollapse:()=>i(!r)}),e.jsx("main",{style:{flex:1,overflowY:"auto",padding:"24px",backgroundColor:"#F5F5F7"},children:e.jsx("div",{className:"animate-in",children:t||e.jsx(ot,{})})})]})]})})};class G extends Error{constructor(o,n,l){super(n),this.code=o,this.details=l,this.name="APIErrorException"}static fromResponse(o){return new G(o.code,o.message,o.details)}}function Hr(){return""}const qe=Hr();function qr(t,o){const n=new URL(t,qe||window.location.origin);return o&&Object.entries(o).forEach(([l,r])=>{n.searchParams.append(l,String(r))}),n.toString()}async function ae(t,o={}){const{params:n,...l}=o,r=qr(t,n),i=new Headers(l.headers);!i.has("Content-Type")&&l.body&&i.set("Content-Type","application/json");try{const s=await fetch(r,{...l,headers:i});if(!s.ok){let g;try{g=await s.json()}catch{g={code:s.status,message:s.statusText||"Request failed"}}throw G.fromResponse(g)}return s.status===204?void 0:await s.json()}catch(s){throw s instanceof G?s:new G(0,"Network error",s instanceof Error?s.message:"Unknown error")}}function P(t,o){return ae(t,{...o,method:"GET"})}function W(t,o,n){return ae(t,{...n,method:"POST",body:o?JSON.stringify(o):void 0})}function Vr(t,o,n){return ae(t,{...n,method:"PUT",body:o?JSON.stringify(o):void 0})}function Fe(t,o){return ae(t,{...o,method:"DELETE"})}const Ur={STATUS:"/api/v1/status"},Ve={status:["status"]};function Kr(t){return ne({queryKey:Ve.status,queryFn:()=>P(Ur.STATUS),refetchInterval:5e3,enabled:t==null?void 0:t.enabled,staleTime:3e3})}const Qr={baseUrl:"",autoReconnect:!0,reconnectDelay:1e3,maxReconnectDelay:3e4,backoffMultiplier:1.5,maxReconnectAttempts:0,eventFilter:()=>!0};function Gr(t={}){const o={...Qr,...t},n=o.baseUrl||(typeof window<"u"?window.location.origin:""),[l,r]=c.useState("disconnected"),[i,s]=c.useState(null),[g,p]=c.useState([]),[j,y]=c.useState(null),[a,d]=c.useState(0),h=c.useRef(null),x=c.useRef(null),u=c.useRef(o.reconnectDelay),f=c.useRef(!1),b=c.useCallback(()=>{const A=Math.min(u.current*o.backoffMultiplier,o.maxReconnectDelay);return u.current=A,A},[o.backoffMultiplier,o.maxReconnectDelay]),m=c.useCallback(()=>{u.current=o.reconnectDelay},[o.reconnectDelay]),v=c.useCallback(()=>{h.current&&(h.current.close(),h.current=null),x.current!==null&&(window.clearTimeout(x.current),x.current=null)},[]),C=c.useCallback(()=>{v(),r("connecting"),y(null);const A=`${n}/api/v1/events`,I=new EventSource(A);h.current=I,I.onopen=()=>{r("connected"),d(0),m()},I.onmessage=T=>{try{const N=JSON.parse(T.data);if(!o.eventFilter(N))return;s(N),p(w=>[...w,N])}catch(N){console.error("[useSSE] Failed to parse SSE message:",N)}},["status","metrics","template","facet","error"].forEach(T=>{I.addEventListener(T,N=>{try{const w=N.data,S={type:T,timestamp:new Date().toISOString(),data:JSON.parse(w)};if(!o.eventFilter(S))return;s(S),p(q=>[...q,S])}catch(w){console.error(`[useSSE] Failed to parse ${T} event:`,w)}})}),I.onerror=()=>{const T=new Error("SSE connection error");if(y(T),r("error"),v(),o.autoReconnect&&!f.current)if(o.maxReconnectAttempts===0||a<o.maxReconnectAttempts){const w=b();r("disconnected"),d(S=>S+1),x.current=window.setTimeout(()=>{C()},w)}else r("error");else r("disconnected")}},[n,v,b,o.autoReconnect,o.eventFilter,o.maxReconnectAttempts,a,m]),z=c.useCallback(()=>{f.current=!1,d(0),m(),C()},[C,m]),D=c.useCallback(()=>{f.current=!0,v(),r("disconnected"),d(0),m()},[v,m]);return c.useEffect(()=>(f.current=!1,C(),()=>{f.current=!0,v()}),[C,v]),{status:l,lastEvent:i,events:g,error:j,reconnectAttempts:a,reconnect:z,disconnect:D}}function Yr(){const t=Y(),{data:o,isLoading:n,error:l,isStale:r,refetch:i}=Kr(),{status:s,lastEvent:g,error:p,reconnectAttempts:j,reconnect:y,disconnect:a}=Gr({autoReconnect:!0,reconnectDelay:1e3,maxReconnectDelay:3e4,backoffMultiplier:1.5,eventFilter:f=>f.type==="status"||f.type==="metrics"}),[d,h]=c.useState(o),x=c.useCallback(f=>{t.setQueryData(Ve.status,b=>{if(!b)return b;const m={...b,...f};return h(m),m})},[t]);return c.useEffect(()=>{if(g)switch(g.type){case"status":{const f=g.data;x(f);break}case"metrics":{const f=g.data;x({metrics:{...(d==null?void 0:d.metrics)||{template_count:0,template_hits:0,local_rate:0},...f}});break}case"template":case"facet":break;case"error":console.error("[useRealTimeStatus] SSE error event:",g.data);break}},[g,d==null?void 0:d.metrics,x]),c.useEffect(()=>{o&&h(o)},[o]),{status:d?{...d,isConnected:s==="connected",reconnectAttempts:j,reconnect:y,disconnect:a}:void 0,isLoading:n,error:l||p,isStale:r,refetch:i}}const Jr=()=>{var s,g,p,j,y,a,d,h;const{status:t,error:o,isLoading:n}=Yr(),l=({title:x,icon:u,iconBg:f,children:b})=>e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"20px",transition:"all 0.15s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:f,display:"flex",alignItems:"center",justifyContent:"center"},children:u}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#1D1D1F"},children:x})]}),b]}),r=({label:x,value:u,color:f="#1D1D1F",bgColor:b="#F3F4F6"})=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:"1px solid #F0F0F2"},children:[e.jsx("span",{style:{fontSize:"13px",color:"#6B7280"},children:x}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:f,backgroundColor:b,padding:"4px 10px",borderRadius:"6px"},children:u})]}),i=({name:x,icon:u,isOnline:f,url:b})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:"#FAFAFA",borderRadius:"8px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:f?"rgba(34, 197, 94, 0.1)":"rgba(156, 163, 175, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:700,color:f?"#22C55E":"#9CA3AF"},children:u}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#1D1D1F"},children:x}),b&&e.jsx("div",{style:{fontSize:"11px",color:"#9CA3AF",fontFamily:"monospace"},children:b})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"20px",backgroundColor:f?"rgba(34, 197, 94, 0.1)":"rgba(156, 163, 175, 0.1)",border:`1px solid ${f?"rgba(34, 197, 94, 0.2)":"rgba(156, 163, 175, 0.2)"}`},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:f?"#22C55E":"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:500,color:f?"#166534":"#6B7280"},children:f?"Online":"Offline"})]})]});return e.jsxs("div",{style:{minHeight:"100%"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:"#1D1D1F",marginBottom:"8px"},children:"Dashboard"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"System overview and real-time status"})]}),o&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(J,{size:20,style:{color:"#EF4444",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"#B91C1C",marginBottom:"4px"},children:"Connection Error"}),e.jsx("p",{style:{fontSize:"13px",color:"#DC2626"},children:o.message})]})]}),n&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px 0"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(L,{size:32,style:{color:"#3B82F6",animation:"spin 1s linear infinite"}})}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Connecting to server..."})]})}),!n&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[e.jsx(l,{title:"Active Facet",icon:e.jsx(ie,{size:20,style:{color:"#8B5CF6"}}),iconBg:"rgba(139, 92, 242, 0.1)",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #8B5CF6 0%, #6366F1 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(U,{size:24,style:{color:"#FFFFFF"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F"},children:(t==null?void 0:t.active_facet)||"Default"}),e.jsx("div",{style:{fontSize:"13px",color:"#6B7280"},children:"Currently active persona"})]})]})}),e.jsxs(l,{title:"System Metrics",icon:e.jsx(ft,{size:20,style:{color:"#3B82F6"}}),iconBg:"rgba(59, 130, 246, 0.1)",children:[e.jsx(r,{label:"Template Count",value:((s=t==null?void 0:t.metrics)==null?void 0:s.template_count)??0,color:"#3B82F6",bgColor:"rgba(59, 130, 246, 0.1)"}),e.jsx(r,{label:"Template Hits",value:((g=t==null?void 0:t.metrics)==null?void 0:g.template_hits)??0,color:"#22C55E",bgColor:"rgba(34, 197, 94, 0.1)"}),e.jsx(r,{label:"Local Rate",value:`${((p=t==null?void 0:t.metrics)==null?void 0:p.local_rate)??0}%`,color:"#F59E0B",bgColor:"rgba(245, 158, 11, 0.1)"})]}),e.jsxs(l,{title:"Provider Status",icon:e.jsx(vr,{size:20,style:{color:"#22C55E"}}),iconBg:"rgba(34, 197, 94, 0.1)",children:[e.jsx(i,{name:"Ollama",icon:"",isOnline:((j=t==null?void 0:t.providers)==null?void 0:j.ollama)??!1,url:(y=t==null?void 0:t.providers)==null?void 0:y.ollama_url}),e.jsx(i,{name:"Anthropic",icon:"",isOnline:((a=t==null?void 0:t.providers)==null?void 0:a.anthropic)??!1}),e.jsx(i,{name:"OpenAI",icon:"",isOnline:((d=t==null?void 0:t.providers)==null?void 0:d.openai)??!1}),e.jsx(i,{name:"Gemini",icon:"",isOnline:((h=t==null?void 0:t.providers)==null?void 0:h.gemini)??!1})]}),e.jsx(l,{title:"Quick Start",icon:e.jsx(le,{size:20,style:{color:"#F59E0B"}}),iconBg:"rgba(245, 158, 11, 0.1)",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{padding:"12px",backgroundColor:"#1D1D1F",borderRadius:"8px",fontFamily:"monospace",fontSize:"13px",color:"#22C55E"},children:[e.jsx("span",{style:{color:"#6B7280"},children:"$"})," cortex"]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#1D1D1F",borderRadius:"8px",fontFamily:"monospace",fontSize:"13px",color:"#3B82F6"},children:[e.jsx("span",{style:{color:"#6B7280"},children:"$"})," cortex ui"]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#1D1D1F",borderRadius:"8px",fontFamily:"monospace",fontSize:"13px",color:"#8B5CF6"},children:[e.jsx("span",{style:{color:"#6B7280"},children:"$"})," cortex --help"]})]})})]}),t&&!n&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",flexWrap:"wrap",gap:"24px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(vt,{size:14,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Version:"}),e.jsx("span",{style:{fontSize:"12px",fontFamily:"monospace",color:"#1D1D1F",fontWeight:500},children:t.version})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(fe,{size:14,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Uptime:"}),e.jsx("span",{style:{fontSize:"12px",fontFamily:"monospace",color:"#1D1D1F",fontWeight:500},children:t.uptime})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Z,{size:14,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:"Port:"}),e.jsx("span",{style:{fontSize:"12px",fontFamily:"monospace",color:"#3B82F6",fontWeight:500},children:t.port})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{style:{fontSize:"11px",fontWeight:600,padding:"4px 10px",borderRadius:"20px",backgroundColor:t.dev_mode?"rgba(245, 158, 11, 0.1)":"rgba(34, 197, 94, 0.1)",color:t.dev_mode?"#D97706":"#166534"},children:t.dev_mode?"Development":"Production"})}),t.tui_active&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#3B82F6",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:500,color:"#3B82F6"},children:"TUI Active"})]})]})]})},re={all:["facets"],list:()=>[...re.all,"list"],detail:t=>[...re.all,"detail",t]};async function Xr(){return P("/api/v1/facets")}async function Zr(t){return W(`/api/v1/facets/${t}/activate`)}function en(){return ne({queryKey:re.list(),queryFn:Xr,staleTime:3e4,refetchOnWindowFocus:!0})}function tn(){const t=Y();return oe({mutationFn:Zr,onSuccess:()=>{t.invalidateQueries({queryKey:re.list()}),t.invalidateQueries({queryKey:["status"]})}})}const rn=({facet:t,isOpen:o,onClose:n})=>{if(!o||!t)return null;const l=g=>{g.target===g.currentTarget&&n()},r=g=>new Date(g).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),s=(g=>{switch(g){case"purple":return{hex:"#8B5CF6",name:"Purple"};case"green":return{hex:"#22C55E",name:"Green"};case"yellow":return{hex:"#F59E0B",name:"Yellow"};case"blue":return{hex:"#3B82F6",name:"Blue"};case"cyan":default:return{hex:"#06B6D4",name:"Cyan"}}})(t.color);return e.jsx("div",{style:{position:"fixed",inset:0,zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)"},onClick:l,children:e.jsxs("div",{style:{width:"100%",maxWidth:"560px",margin:"0 16px",maxHeight:"calc(100vh - 80px)",backgroundColor:"#FFFFFF",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid #E5E5E7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"14px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:`linear-gradient(135deg, ${s.hex} 0%, ${s.hex}99 100%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${s.hex}33`,fontSize:"20px"},children:t.icon||e.jsx(ie,{size:22,style:{color:"#FFFFFF"}})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F"},children:t.name}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280"},children:"Facet Details"})]})]}),e.jsx("button",{onClick:n,style:{padding:"8px",backgroundColor:"#F3F4F6",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.15s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#E5E7EB",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#F3F4F6",title:"Close",children:e.jsx(M,{size:18,style:{color:"#6B7280"}})})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#6B7280",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Facet ID"}),e.jsx("div",{style:{padding:"10px 14px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontFamily:"monospace",fontSize:"13px",color:"#1D1D1F"},children:t.id})]}),t.description&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#6B7280",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Description"}),e.jsx("div",{style:{padding:"10px 14px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",lineHeight:"1.5"},children:t.description})]}),t.system_prompt&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:600,color:"#6B7280",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e.jsx(U,{size:12}),"System Prompt"]}),e.jsx("div",{style:{padding:"12px 14px",backgroundColor:"#1D1D1F",border:"1px solid #374151",borderRadius:"8px",fontFamily:"monospace",fontSize:"12px",color:"#E5E7EB",lineHeight:"1.6",whiteSpace:"pre-wrap",maxHeight:"200px",overflow:"auto"},children:t.system_prompt})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#6B7280",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:t.active?e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"20px"},children:[e.jsx(ye,{size:14,style:{color:"#22C55E"}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#166534"},children:"Active"})]})}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#F3F4F6",border:"1px solid #E5E5E7",borderRadius:"20px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"13px",fontWeight:500,color:"#6B7280"},children:"Inactive"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",paddingTop:"20px",borderTop:"1px solid #E5E5E7"},children:[e.jsxs("div",{style:{padding:"12px",backgroundColor:"#F9FAFB",borderRadius:"10px",border:"1px solid #E5E5E7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(zt,{size:12,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Created"})]}),e.jsx("p",{style:{fontSize:"12px",fontFamily:"monospace",color:"#1D1D1F"},children:r(t.created_at)})]}),e.jsxs("div",{style:{padding:"12px",backgroundColor:"#F9FAFB",borderRadius:"10px",border:"1px solid #E5E5E7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(fe,{size:12,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Updated"})]}),e.jsx("p",{style:{fontSize:"12px",fontFamily:"monospace",color:"#1D1D1F"},children:r(t.updated_at)})]}),t.color&&e.jsxs("div",{style:{padding:"12px",backgroundColor:"#F9FAFB",borderRadius:"10px",border:"1px solid #E5E5E7",gridColumn:"span 2"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(dr,{size:12,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Theme Color"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"6px",backgroundColor:s.hex,border:"2px solid rgba(255,255,255,0.5)",boxShadow:`0 2px 6px ${s.hex}44`}}),e.jsx("span",{style:{fontSize:"13px",color:"#1D1D1F",fontWeight:500},children:s.name}),e.jsx("span",{style:{fontSize:"11px",fontFamily:"monospace",color:"#6B7280"},children:s.hex})]})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"16px 24px",borderTop:"1px solid #E5E5E7",backgroundColor:"#FAFAFA"},children:e.jsx("button",{onClick:n,style:{padding:"10px 20px",backgroundColor:"#F3F4F6",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",fontWeight:500,color:"#1D1D1F",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor="#E5E7EB"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="#F3F4F6"},children:"Close"})})]})})},nn=()=>{const{data:t,error:o,isLoading:n}=en(),l=tn(),[r,i]=c.useState(null),[s,g]=c.useState(!1),[p,j]=c.useState(null),y=async u=>{j(u);try{await l.mutateAsync(u)}finally{j(null)}},a=u=>{i(u),g(!0)},d=()=>{g(!1),i(null)},h=u=>{switch(u){case"purple":return{bg:"rgba(139, 92, 242, 0.1)",border:"#8B5CF6",text:"#8B5CF6"};case"green":return{bg:"rgba(34, 197, 94, 0.1)",border:"#22C55E",text:"#22C55E"};case"yellow":return{bg:"rgba(245, 158, 11, 0.1)",border:"#F59E0B",text:"#92400E"};case"blue":return{bg:"rgba(59, 130, 246, 0.1)",border:"#3B82F6",text:"#3B82F6"};case"cyan":default:return{bg:"rgba(6, 182, 212, 0.1)",border:"#06B6D4",text:"#0891B2"}}},x=({facet:u,onActivate:f,onEdit:b,isActivating:m})=>{const v=h(u.color);return e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:u.active?`2px solid ${v.border}`:"1px solid #E5E5E7",padding:"20px",transition:"all 0.15s ease",boxShadow:u.active?`0 4px 12px ${v.bg}`:"0 1px 3px rgba(0, 0, 0, 0.05)",cursor:"pointer",position:"relative"},onClick:()=>!u.active&&!m&&f(u.id),onMouseEnter:C=>{u.active||(C.currentTarget.style.borderColor=v.border,C.currentTarget.style.boxShadow=`0 4px 12px ${v.bg}`)},onMouseLeave:C=>{u.active||(C.currentTarget.style.borderColor="#E5E5E7",C.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.05)")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"10px",backgroundColor:u.active?v.border:v.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:u.icon||e.jsx(ie,{size:20,style:{color:u.active?"#FFFFFF":v.text}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#1D1D1F",marginBottom:"2px"},children:u.name}),u.active&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22C55E"}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:500,color:"#22C55E"},children:"Active"})]})]})]}),e.jsx("button",{onClick:C=>{C.stopPropagation(),b(u)},style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",opacity:.5,transition:"opacity 0.15s"},onMouseEnter:C=>C.currentTarget.style.opacity="1",onMouseLeave:C=>C.currentTarget.style.opacity="0.5",title:"View details",children:e.jsx(We,{size:14,style:{color:"#6B7280"}})})]}),u.description&&e.jsx("p",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"12px",lineHeight:"1.5"},children:u.description}),u.system_prompt&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #F0F0F2"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[e.jsx(U,{size:12,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:600,color:"#9CA3AF",textTransform:"uppercase",letterSpacing:"0.5px"},children:"System Prompt"})]}),e.jsx("p",{style:{fontSize:"11px",color:"#6B7280",fontFamily:"monospace",backgroundColor:"#F9FAFB",padding:"8px",borderRadius:"6px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.4"},children:u.system_prompt})]}),m&&e.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(L,{size:16,style:{color:v.border,animation:"spin 1s linear infinite"}}),e.jsx("span",{style:{fontSize:"13px",color:v.text,fontWeight:500},children:"Activating..."})]})})]})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{minHeight:"100%"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:"#1D1D1F",marginBottom:"8px"},children:"Facets"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Manage AI personas and configuration presets"}),(t==null?void 0:t.active_facet)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"20px"},children:[e.jsx(Ie,{size:14,style:{color:"#22C55E"}}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:500,color:"#166534"},children:["Active: ",t.active_facet]})]})]})]}),o&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(J,{size:20,style:{color:"#EF4444",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"#B91C1C",marginBottom:"4px"},children:"Failed to load facets"}),e.jsx("p",{style:{fontSize:"13px",color:"#DC2626"},children:o instanceof Error?o.message:"Unknown error"})]})]}),n&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px 0"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(L,{size:32,style:{color:"#3B82F6",animation:"spin 1s linear infinite"}})}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Loading facets..."})]})}),!n&&!o&&(t==null?void 0:t.facets.length)===0&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px 0"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"320px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx($e,{size:32,style:{color:"#9CA3AF"}})}),e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"8px"},children:"No facets available"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Facets allow you to switch between different AI personas and configurations."})]})}),!n&&!o&&t&&t.facets.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:t.facets.map(u=>e.jsx(x,{facet:u,onActivate:y,onEdit:a,isActivating:p===u.id},u.id))}),!n&&!o&&t&&t.facets.length>0&&e.jsxs("div",{style:{marginTop:"24px",padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(er,{size:18,style:{color:"#3B82F6",flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"13px",fontWeight:600,color:"#1D1D1F",marginBottom:"4px"},children:"About Facets"}),e.jsx("p",{style:{fontSize:"12px",color:"#6B7280",lineHeight:"1.5"},children:"Facets are persona presets that configure how Cortex behaves. Click on a facet to activate it, or click the edit icon to view its details. Only one facet can be active at a time."})]})]})]}),e.jsx(rn,{facet:r,isOpen:s,onClose:d})]})};async function on(){return P("/api/v1/knowledge/documents")}async function sn(t){return W("/api/v1/knowledge/search",t)}async function ln(t){return W("/api/v1/knowledge/ingest",t)}async function an(t){return Fe(`/api/v1/knowledge/documents/${t}`)}async function dn(){return P("/api/v1/knowledge/stats")}const cn=({document:t,onDelete:o})=>{const n=new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),r=(()=>{switch(t.type){case"file":return{icon:me,color:"#3B82F6",bg:"rgba(59, 130, 246, 0.1)"};case"directory":return{icon:be,color:"#8B5CF6",bg:"rgba(139, 92, 246, 0.1)"};case"conversation":return{icon:$,color:"#EC4899",bg:"rgba(236, 72, 153, 0.1)"};case"text":default:return{icon:Oe,color:"#F59E0B",bg:"rgba(245, 158, 11, 0.1)"}}})(),i=r.icon;return e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"20px",transition:"all 0.15s ease",position:"relative"},onMouseEnter:s=>{s.currentTarget.style.borderColor=r.color,s.currentTarget.style.boxShadow=`0 4px 12px ${r.bg}`},onMouseLeave:s=>{s.currentTarget.style.borderColor="#E5E5E7",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",flex:1,minWidth:0},children:[e.jsx("div",{style:{flexShrink:0,width:"40px",height:"40px",borderRadius:"10px",backgroundColor:r.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(i,{size:20,style:{color:r.color}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#1D1D1F",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title}),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",backgroundColor:"#F3F4F6",border:"1px solid #E5E5E7",borderRadius:"4px",fontSize:"11px",fontWeight:500,color:"#6B7280",textTransform:"capitalize"},children:t.type})]})]}),e.jsx("button",{onClick:()=>o(t.id),style:{flexShrink:0,marginLeft:"8px",padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",opacity:.4,transition:"all 0.15s"},onMouseEnter:s=>{s.currentTarget.style.opacity="1",s.currentTarget.style.backgroundColor="#FEE2E2"},onMouseLeave:s=>{s.currentTarget.style.opacity="0.4",s.currentTarget.style.backgroundColor="transparent"},title:"Delete document",children:e.jsx(X,{size:16,style:{color:"#EF4444"}})})]}),t.source_path&&e.jsx("div",{style:{marginBottom:"12px"},children:e.jsx("p",{style:{fontSize:"12px",color:"#9CA3AF",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.source_path})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid #F0F0F2"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(Te,{size:14,style:{color:"#9CA3AF"}}),e.jsxs("span",{style:{fontSize:"12px",color:"#6B7280",fontWeight:500},children:[t.chunk_count," chunks"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(fe,{size:14,style:{color:"#9CA3AF"}}),e.jsx("span",{style:{fontSize:"12px",color:"#6B7280"},children:n})]})]})})]})},pn=({onIngest:t,isIngesting:o})=>{const[n,l]=c.useState("file"),[r,i]=c.useState(""),[s,g]=c.useState(""),[p,j]=c.useState(""),y=async h=>{h.preventDefault();const x={type:n,title:p||void 0};n==="text"?x.content=s:x.path=r;try{await t(x),i(""),g(""),j("")}catch(u){console.error("Ingestion error:",u)}},a=()=>p?n==="text"?s.trim().length>0:r.trim().length>0:!1,d=[{value:"file",label:"File",icon:me},{value:"directory",label:"Directory",icon:be},{value:"text",label:"Text",icon:Oe}];return e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"14px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:"#22C55E",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(H,{size:24,style:{color:"#FFFFFF"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#1D1D1F"},children:"Ingest Content"}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280"},children:"Add documents to the knowledge base"})]})]}),e.jsxs("form",{onSubmit:y,style:{padding:"24px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"#374151",marginBottom:"8px"},children:"Content Type"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},children:d.map(h=>{const x=h.icon,u=n===h.value;return e.jsxs("button",{type:"button",onClick:()=>l(h.value),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 16px",backgroundColor:u?"#3B82F6":"#FFFFFF",color:u?"#FFFFFF":"#6B7280",border:u?"1px solid #3B82F6":"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.15s"},children:[e.jsx(x,{size:16}),h.label]},h.value)})})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"#374151",marginBottom:"8px"},children:"Title"}),e.jsx("input",{type:"text",value:p,onChange:h=>j(h.target.value),placeholder:"Enter document title...",disabled:o,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none"}})]}),n==="text"?e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"#374151",marginBottom:"8px"},children:"Text Content"}),e.jsx("textarea",{value:s,onChange:h=>g(h.target.value),placeholder:"Paste or type content here...",rows:6,disabled:o,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",fontFamily:"monospace",resize:"vertical",outline:"none"}}),e.jsx("p",{style:{marginTop:"6px",fontSize:"12px",color:"#9CA3AF"},children:"Content will be chunked and embedded for semantic search"})]}):e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:"#374151",marginBottom:"8px"},children:n==="file"?"File Path":"Directory Path"}),e.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),placeholder:n==="file"?"/path/to/document.txt":"/path/to/directory",disabled:o,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",fontFamily:"monospace",outline:"none"}}),e.jsx("p",{style:{marginTop:"6px",fontSize:"12px",color:"#9CA3AF"},children:n==="file"?"Absolute or relative path to the file":"All text files in directory will be ingested"})]}),e.jsx("button",{type:"submit",disabled:!a()||o,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px 20px",backgroundColor:a()&&!o?"#3B82F6":"#E5E5E7",color:a()&&!o?"#FFFFFF":"#9CA3AF",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:a()&&!o?"pointer":"not-allowed",transition:"all 0.15s"},children:o?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:18,style:{animation:"spin 1s linear infinite"}}),e.jsx("span",{children:"Ingesting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{size:18}),e.jsx("span",{children:"Ingest Content"})]})})]})]})},xn=({results:t,query:o,searchTimeMs:n,onClear:l})=>t.length===0?e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"60px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(Pe,{size:32,style:{color:"#9CA3AF"}})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"8px"},children:"No Results Found"}),e.jsxs("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"24px"},children:['No documents matched your query: "',o,'"']}),e.jsx("button",{onClick:l,style:{padding:"10px 20px",backgroundColor:"#F3F4F6",color:"#6B7280",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Clear Search"})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#1D1D1F"},children:"Search Results"}),e.jsxs("p",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:["Found ",t.length," result",t.length!==1?"s":"",' for "',o,'"',n!==void 0&&` in ${n}ms`]})]}),e.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:"#F3F4F6",color:"#6B7280",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:[e.jsx(M,{size:14}),"Clear"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((r,i)=>e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"20px",transition:"all 0.15s ease"},onMouseEnter:s=>{s.currentTarget.style.borderColor="#3B82F6",s.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.1)"},onMouseLeave:s=>{s.currentTarget.style.borderColor="#E5E5E7",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"4px"},children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#3B82F6",color:"#FFFFFF",fontSize:"12px",fontWeight:700},children:i+1}),e.jsx("h4",{style:{fontSize:"15px",fontWeight:600,color:"#1D1D1F",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.document_title})]})}),e.jsxs("div",{style:{flexShrink:0,marginLeft:"16px",display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px"},children:[e.jsx(Ar,{size:14,style:{color:"#3B82F6"}}),e.jsxs("span",{style:{fontSize:"13px",fontWeight:600,color:"#3B82F6"},children:[(r.similarity_score*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{style:{position:"relative",paddingLeft:"16px"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"3px",backgroundColor:"#3B82F6",borderRadius:"2px"}}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",lineHeight:"1.6",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.chunk_text})]}),r.metadata&&Object.keys(r.metadata).length>0&&e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #F0F0F2",display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(r.metadata).map(([s,g])=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",backgroundColor:"#F3F4F6",border:"1px solid #E5E5E7",borderRadius:"4px",fontSize:"11px",color:"#6B7280"},children:[e.jsxs("span",{style:{fontWeight:600},children:[s,":"]}),e.jsx("span",{style:{marginLeft:"4px"},children:String(g)})]},s))})]},`${r.document_id}-${i}`))})]}),un=()=>{const[t,o]=c.useState([]),[n,l]=c.useState(null),[r,i]=c.useState(""),[s,g]=c.useState([]),[p,j]=c.useState(!1),[y,a]=c.useState(!1),[d,h]=c.useState(!0),[x,u]=c.useState(null),[f,b]=c.useState(null),[m,v]=c.useState(),[C,z]=c.useState(!1),D=c.useCallback(async()=>{try{h(!0),u(null);const[w,S]=await Promise.all([on(),dn()]);o(w.documents),l(S)}catch(w){u(w instanceof Error?w.message:"Failed to load knowledge base")}finally{h(!1)}},[]);c.useEffect(()=>{D()},[D]);const A=async w=>{if(w.preventDefault(),!!r.trim())try{j(!0),u(null);const S=await sn({query:r,limit:10,min_score:.7});g(S.results),v(S.search_time_ms)}catch(S){u(S instanceof Error?S.message:"Search failed"),g([])}finally{j(!1)}},I=async w=>{try{a(!0),u(null);const S=await ln(w);b(`Successfully ingested "${S.title}" with ${S.chunk_count} chunks`),await D(),z(!1),setTimeout(()=>b(null),5e3)}catch(S){u(S instanceof Error?S.message:"Ingestion failed")}finally{a(!1)}},E=async w=>{if(confirm("Are you sure you want to delete this document?"))try{u(null),await an(w),b("Document deleted successfully"),await D(),setTimeout(()=>b(null),3e3)}catch(S){u(S instanceof Error?S.message:"Delete failed")}},T=()=>{i(""),g([]),v(void 0)},N=w=>w<1024?`${w} B`:w<1024*1024?`${(w/1024).toFixed(1)} KB`:`${(w/1024/1024).toFixed(2)} MB`;return e.jsxs("div",{style:{minHeight:"100%"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:"#1D1D1F",marginBottom:"8px"},children:"Knowledge Base"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Semantic search and document management"})]}),e.jsx("button",{onClick:()=>z(!C),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:C?"#FEE2E2":"#22C55E",color:C?"#DC2626":"#FFFFFF",border:C?"1px solid #FECACA":"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.15s"},children:C?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:18}),e.jsx("span",{children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:18}),e.jsx("span",{children:"Ingest Content"})]})})]}),n&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(me,{size:20,style:{color:"#3B82F6"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Documents"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",fontFamily:"monospace"},children:n.total_documents})]})]}),e.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(139, 92, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Te,{size:20,style:{color:"#8B5CF6"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Chunks"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",fontFamily:"monospace"},children:n.total_chunks})]})]}),e.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Xt,{size:20,style:{color:"#22C55E"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Size"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",fontFamily:"monospace"},children:N(n.total_size_bytes)})]})]})]})]}),f&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(ye,{size:20,style:{color:"#22C55E",flexShrink:0}}),e.jsx("p",{style:{fontSize:"14px",fontWeight:500,color:"#166534"},children:f})]}),x&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(J,{size:20,style:{color:"#EF4444",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"#B91C1C",marginBottom:"4px"},children:"Error"}),e.jsx("p",{style:{fontSize:"13px",color:"#DC2626"},children:x})]})]}),C&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(pn,{onIngest:I,isIngesting:y})}),e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("form",{onSubmit:A,children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:e.jsx(Pe,{size:20,style:{color:"#9CA3AF"}})}),e.jsx("input",{type:"text",value:r,onChange:w=>i(w.target.value),placeholder:"Search knowledge base with semantic search...",disabled:p,style:{width:"100%",padding:"14px 140px 14px 48px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"12px",fontSize:"15px",color:"#1D1D1F",outline:"none"}}),e.jsxs("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"8px"},children:[r&&e.jsx("button",{type:"button",onClick:T,style:{padding:"8px 12px",backgroundColor:"transparent",border:"none",fontSize:"13px",color:"#6B7280",cursor:"pointer"},children:"Clear"}),e.jsx("button",{type:"submit",disabled:!r.trim()||p,style:{padding:"8px 16px",backgroundColor:r.trim()&&!p?"#3B82F6":"#E5E5E7",color:r.trim()&&!p?"#FFFFFF":"#9CA3AF",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:r.trim()&&!p?"pointer":"not-allowed"},children:p?"Searching...":"Search"})]})]})})}),s.length>0&&e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx(xn,{results:s,query:r,searchTimeMs:m,onClear:T})}),e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"16px"},children:["All Documents (",t.length,")"]}),d?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px 0"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(L,{size:32,style:{color:"#3B82F6",animation:"spin 1s linear infinite"}})}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Loading documents..."})]})}):t.length===0?e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"60px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(qt,{size:32,style:{color:"#9CA3AF"}})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"8px"},children:"No Documents"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"24px",maxWidth:"320px",margin:"0 auto 24px"},children:"The knowledge base is empty. Start by ingesting some content."}),e.jsx("button",{onClick:()=>z(!0),style:{padding:"10px 20px",backgroundColor:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Ingest Content"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"16px"},children:t.map(w=>e.jsx(cn,{document:w,onDelete:E},w.id))})]})]})},de=({title:t,description:o,icon:n,iconColor:l="from-accent to-accent-secondary",children:r,noPadding:i=!1})=>e.jsxs("div",{className:"group relative rounded-2xl overflow-hidden transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.08)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.02) 0%, transparent 100%)"}}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"px-6 pt-6 pb-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[n&&e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl bg-gradient-to-br ${l} flex items-center justify-center shadow-lg`,style:{boxShadow:"0 4px 12px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.1) inset"},children:n}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",style:{color:"rgba(255,255,255,0.95)"},children:t}),o&&e.jsx("p",{className:"text-sm leading-relaxed",style:{color:"rgba(255,255,255,0.55)"},children:o})]})]})}),e.jsx("div",{className:"mx-6",style:{height:"1px",background:"linear-gradient(90deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%)"}}),e.jsx("div",{className:i?"":"px-6 py-5",children:r})]})]}),ee=({name:t,description:o,icon:n,accentColor:l,isOnline:r,config:i,onSave:s,onTest:g,showEndpoint:p=!1})=>{const[j,y]=c.useState(!1),[a,d]=c.useState(!1),[h,x]=c.useState(!1),[u,f]=c.useState(!1),[b,m]=c.useState(i),[v,C]=c.useState(null),z=async()=>{x(!0);try{await s(b),y(!1),C(null)}catch(E){console.error("Failed to save provider config:",E)}finally{x(!1)}},D=async()=>{d(!0);try{const E=await g();C(E)}catch(E){console.error("Failed to test connection:",E),C(!1)}finally{d(!1)}},A=()=>{m(i),y(!1),C(null)},I=i.api_key&&i.api_key.length>0;return e.jsxs("div",{className:"group relative rounded-xl overflow-hidden transition-all duration-200",style:{background:j?"rgba(255,255,255,0.04)":"rgba(255,255,255,0.02)",border:`1px solid ${j?"rgba(255,255,255,0.12)":"rgba(255,255,255,0.06)"}`},children:[e.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",style:{background:l},children:n}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:"text-sm font-semibold",style:{color:"rgba(255,255,255,0.92)"},children:t}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium",style:{background:r?"rgba(34,197,94,0.15)":"rgba(239,68,68,0.15)",color:r?"#22C55E":"#EF4444"},children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{background:r?"#22C55E":"#EF4444"}}),r?"Connected":"Offline"]})]}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255,255,255,0.45)"},children:I&&!j?"API key configured":o})]}),e.jsx("div",{className:"flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:A,disabled:h,className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-all disabled:opacity-50",style:{color:"rgba(255,255,255,0.6)",background:"transparent",border:"1px solid rgba(255,255,255,0.1)"},children:"Cancel"}),e.jsx("button",{onClick:z,disabled:h,className:"px-3 py-1.5 text-xs font-medium text-white rounded-lg transition-all disabled:opacity-50 flex items-center gap-1.5",style:{background:"#3B82F6"},children:h?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save"})]}):e.jsx("button",{onClick:()=>y(!0),className:"px-3 py-1.5 text-xs font-medium rounded-lg transition-all",style:{color:"rgba(255,255,255,0.7)",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.08)"},onMouseOver:E=>{E.currentTarget.style.background="rgba(255,255,255,0.1)",E.currentTarget.style.color="rgba(255,255,255,0.9)"},onMouseOut:E=>{E.currentTarget.style.background="rgba(255,255,255,0.06)",E.currentTarget.style.color="rgba(255,255,255,0.7)"},children:"Configure"})})]}),j&&e.jsxs("div",{className:"px-4 pb-4 pt-2 space-y-4",style:{borderTop:"1px solid rgba(255,255,255,0.06)"},children:[p&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"rgba(255,255,255,0.6)"},children:"Endpoint URL"}),e.jsx("input",{type:"text",value:b.endpoint||"",onChange:E=>m({...b,endpoint:E.target.value}),placeholder:"http://localhost:11434",className:"w-full px-3 py-2.5 rounded-lg text-sm font-mono transition-all focus:outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"rgba(255,255,255,0.9)"}})]}),!p&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"rgba(255,255,255,0.6)"},children:"API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:b.api_key||"",onChange:E=>m({...b,api_key:E.target.value}),placeholder:`Enter your ${t} API key`,className:"w-full px-3 py-2.5 pr-10 rounded-lg text-sm font-mono transition-all focus:outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"rgba(255,255,255,0.9)"}}),e.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-2.5 top-1/2 -translate-y-1/2 p-1 rounded transition-colors",style:{color:"rgba(255,255,255,0.4)"},title:u?"Hide API key":"Show API key",children:u?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"mt-1.5 text-xs",style:{color:"rgba(255,255,255,0.35)"},children:"Stored securely, never shared"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-2",style:{color:"rgba(255,255,255,0.6)"},children:"Default Model"}),e.jsx("input",{type:"text",value:b.model||"",onChange:E=>m({...b,model:E.target.value}),placeholder:p?"llama3.2":`e.g., ${i.model||"model-name"}`,className:"w-full px-3 py-2.5 rounded-lg text-sm font-mono transition-all focus:outline-none",style:{background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"rgba(255,255,255,0.9)"}})]}),e.jsxs("div",{className:"pt-1",children:[e.jsx("button",{onClick:D,disabled:a,className:"w-full px-3 py-2.5 text-sm font-medium rounded-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",style:{background:"rgba(255,255,255,0.04)",border:"1px solid rgba(255,255,255,0.08)",color:"rgba(255,255,255,0.7)"},children:a?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Test Connection"]})}),v!==null&&e.jsxs("div",{className:"mt-3 px-3 py-2.5 rounded-lg text-sm flex items-center gap-2",style:{background:v?"rgba(34,197,94,0.1)":"rgba(239,68,68,0.1)",border:`1px solid ${v?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)"}`,color:v?"#22C55E":"#EF4444"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v?"Connection successful":"Connection failed"]})]})]})]})},hn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),gn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2L2 19h4l1.5-3h9l1.5 3h4L12 2zm0 5.5L15.5 14h-7L12 7.5z"})}),yn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M22.2 7.6c.4 1.2.6 2.5.6 3.8 0 2.3-.7 4.5-2 6.3-1.9 2.6-5 4.3-8.4 4.3-2.3 0-4.4-.7-6.2-1.9-.5-.3-.5-1 0-1.3l1.8-1.4c.3-.3.8-.3 1.1 0 1 .7 2.2 1.1 3.4 1.1 2 0 3.8-1 4.9-2.5.8-1.1 1.2-2.4 1.2-3.8 0-1-.2-1.9-.6-2.8-.6-1.3-1.6-2.3-2.9-3-.4-.2-.5-.7-.2-1l1.4-1.8c.3-.4.9-.5 1.3-.2 2.1 1.2 3.6 3.2 4.6 5.2zM7.5 15c-1.4 0-2.5-1.1-2.5-2.5S6.1 10 7.5 10s2.5 1.1 2.5 2.5S8.9 15 7.5 15z"})}),fn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),mn=({providers:t,providerStatus:o,onUpdateProvider:n,onTestConnection:l})=>e.jsx(de,{title:"AI Providers",description:"Connect and configure your AI model providers",iconColor:"from-emerald-500 to-teal-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{name:"Ollama",description:"Run models locally with Ollama",icon:e.jsx(hn,{}),accentColor:"linear-gradient(135deg, #10B981 0%, #059669 100%)",isOnline:o.ollama,config:t.ollama||{},onSave:r=>n("ollama",r),onTest:()=>l("ollama"),showEndpoint:!0}),e.jsx(ee,{name:"Anthropic",description:"Claude models for reasoning & analysis",icon:e.jsx(gn,{}),accentColor:"linear-gradient(135deg, #A855F7 0%, #7C3AED 100%)",isOnline:o.anthropic,config:t.anthropic||{},onSave:r=>n("anthropic",r),onTest:()=>l("anthropic")}),e.jsx(ee,{name:"OpenAI",description:"GPT models for versatile AI tasks",icon:e.jsx(yn,{}),accentColor:"linear-gradient(135deg, #3B82F6 0%, #06B6D4 100%)",isOnline:o.openai,config:t.openai||{},onSave:r=>n("openai",r),onTest:()=>l("openai")}),e.jsx(ee,{name:"Gemini",description:"Google's multimodal AI models",icon:e.jsx(fn,{}),accentColor:"linear-gradient(135deg, #F59E0B 0%, #EF4444 100%)",isOnline:o.gemini,config:t.gemini||{},onSave:r=>n("gemini",r),onTest:()=>l("gemini")})]})}),bn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),jn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2L2 19h4l1.5-3h9l1.5 3h4L12 2zm0 5.5L15.5 14h-7L12 7.5z"})}),vn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M22.2 7.6c.4 1.2.6 2.5.6 3.8 0 2.3-.7 4.5-2 6.3-1.9 2.6-5 4.3-8.4 4.3-2.3 0-4.4-.7-6.2-1.9-.5-.3-.5-1 0-1.3l1.8-1.4c.3-.3.8-.3 1.1 0 1 .7 2.2 1.1 3.4 1.1 2 0 3.8-1 4.9-2.5.8-1.1 1.2-2.4 1.2-3.8 0-1-.2-1.9-.6-2.8-.6-1.3-1.6-2.3-2.9-3-.4-.2-.5-.7-.2-1l1.4-1.8c.3-.4.9-.5 1.3-.2 2.1 1.2 3.6 3.2 4.6 5.2zM7.5 15c-1.4 0-2.5-1.1-2.5-2.5S6.1 10 7.5 10s2.5 1.1 2.5 2.5S8.9 15 7.5 15z"})}),Fn=()=>e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),kn=[{id:"ollama",name:"Ollama",description:"Local inference",icon:e.jsx(bn,{}),accentColor:"linear-gradient(135deg, #10B981 0%, #059669 100%)",available:!0},{id:"anthropic",name:"Anthropic",description:"Claude models",icon:e.jsx(jn,{}),accentColor:"linear-gradient(135deg, #A855F7 0%, #7C3AED 100%)",available:!0},{id:"openai",name:"OpenAI",description:"GPT models",icon:e.jsx(vn,{}),accentColor:"linear-gradient(135deg, #3B82F6 0%, #06B6D4 100%)",available:!0},{id:"gemini",name:"Gemini",description:"Google AI",icon:e.jsx(Fn,{}),accentColor:"linear-gradient(135deg, #F59E0B 0%, #EF4444 100%)",available:!0}],Cn=({defaultProvider:t,providers:o,onUpdateDefaultProvider:n})=>{const[l,r]=c.useState(t),[i,s]=c.useState(!1),[g,p]=c.useState(!1),j=d=>{r(d),p(d!==t)},y=async()=>{s(!0);try{await n(l),p(!1)}catch(d){console.error("Failed to update default provider:",d)}finally{s(!1)}},a=()=>{r(t),p(!1)};return e.jsx(de,{title:"Default Model",description:"Select your preferred AI provider for chat and task completion",iconColor:"from-violet-500 to-purple-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),children:e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:kn.map(d=>{const h=l===d.id,x=o[d.id],u=x==null?void 0:x.model;return e.jsxs("button",{onClick:()=>j(d.id),className:"relative rounded-xl p-4 text-left transition-all duration-200",style:{background:h?"rgba(59, 130, 246, 0.12)":"rgba(255, 255, 255, 0.02)",border:`1px solid ${h?"rgba(59, 130, 246, 0.4)":"rgba(255, 255, 255, 0.06)"}`,boxShadow:h?"0 0 0 1px rgba(59, 130, 246, 0.2)":"none"},children:[h&&e.jsx("div",{className:"absolute top-3 right-3 w-5 h-5 rounded-full flex items-center justify-center",style:{background:"#3B82F6"},children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{background:d.accentColor},children:d.icon}),e.jsx("div",{className:"text-sm font-semibold mb-0.5",style:{color:"rgba(255, 255, 255, 0.92)"},children:d.name}),e.jsx("div",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.45)"},children:u||d.description})]},d.id)})}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl",style:{background:"rgba(59, 130, 246, 0.08)",border:"1px solid rgba(59, 130, 246, 0.15)"},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"rgba(59, 130, 246, 0.2)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"#3B82F6",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",style:{color:"#60A5FA"},children:"Intelligent Routing"}),e.jsx("p",{className:"text-xs leading-relaxed",style:{color:"rgba(255, 255, 255, 0.55)"},children:"Cortex automatically selects the optimal model for each task based on complexity, context, and cost efficiency."})]})]}),g&&e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",style:{borderTop:"1px solid rgba(255, 255, 255, 0.06)"},children:[e.jsx("button",{onClick:a,disabled:i,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all disabled:opacity-50",style:{color:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Cancel"}),e.jsx("button",{onClick:y,disabled:i,className:"px-4 py-2 text-sm font-medium text-white rounded-lg transition-all disabled:opacity-50 flex items-center gap-2",style:{background:"#3B82F6"},children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply"]})})]})]})})},wn=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),Sn=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),En=[{id:"dark",name:"Dark",description:"Easier on the eyes in low light",icon:e.jsx(wn,{}),preview:{bg:"#1c1c1e",surface:"#2c2c2e",text:"#ffffff",accent:"#0a84ff"}},{id:"light",name:"Light",description:"Best for bright environments",icon:e.jsx(Sn,{}),preview:{bg:"#ffffff",surface:"#f8fafc",text:"#18181b",accent:"#4f46e5"}}],zn=({theme:t,isSelected:o})=>e.jsx("div",{className:"rounded-lg overflow-hidden",style:{border:`2px solid ${o?t.preview.accent:"transparent"}`,boxShadow:o?`0 0 0 2px ${t.preview.accent}30`:"none"},children:e.jsxs("div",{className:"p-2",style:{backgroundColor:t.preview.bg},children:[e.jsxs("div",{className:"h-4 rounded-sm mb-1.5 flex items-center gap-1 px-1.5",style:{backgroundColor:t.preview.surface},children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:"#EF4444"}}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:"#F59E0B"}}),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:"#22C55E"}})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-1.5 rounded-sm",style:{backgroundColor:t.preview.accent,width:"50%"}}),e.jsx("div",{className:"h-1 rounded-sm",style:{backgroundColor:t.preview.text,opacity:.2,width:"70%"}}),e.jsx("div",{className:"h-1 rounded-sm",style:{backgroundColor:t.preview.text,opacity:.15,width:"60%"}})]})]})}),Bn=({currentTheme:t,onUpdateTheme:o})=>{const[n,l]=c.useState(t),[r,i]=c.useState(!1),[s,g]=c.useState(!1),[p,j]=c.useState(!1),[y,a]=c.useState(!1),d=u=>{l(u),g(u!==t)},h=async()=>{i(!0);try{await o(n),g(!1)}catch(u){console.error("Failed to update theme:",u)}finally{i(!1)}},x=()=>{l(t),g(!1)};return e.jsx(de,{title:"Appearance",description:"Personalize how Cortex looks and feels",iconColor:"from-pink-500 to-rose-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:En.map(u=>{const f=n===u.id;return e.jsxs("button",{onClick:()=>d(u.id),className:"relative rounded-xl p-4 text-left transition-all duration-200",style:{background:f?`${u.preview.accent}15`:"rgba(255, 255, 255, 0.02)",border:`1px solid ${f?`${u.preview.accent}50`:"rgba(255, 255, 255, 0.06)"}`},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:u.id==="dark"?"linear-gradient(135deg, #1E293B 0%, #0F172A 100%)":"linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 100%)",color:u.id==="dark"?"#94A3B8":"#64748B"},children:u.icon}),e.jsx(zn,{theme:u,isSelected:f})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold",style:{color:"rgba(255, 255, 255, 0.92)"},children:u.name}),f&&e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center",style:{background:u.preview.accent},children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.45)"},children:u.description})]},u.id)})}),e.jsxs("div",{className:"pt-5",style:{borderTop:"1px solid rgba(255, 255, 255, 0.06)"},children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wider mb-4",style:{color:"rgba(255, 255, 255, 0.4)"},children:"Accessibility"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all",style:{background:"rgba(255, 255, 255, 0.02)"},onClick:()=>j(!p),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.06)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"rgba(255,255,255,0.6)",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"rgba(255, 255, 255, 0.85)"},children:"Reduce motion"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.4)"},children:"Minimize animations"})]})]}),e.jsx("div",{className:"w-11 h-6 rounded-full p-0.5 transition-colors",style:{background:p?"#3B82F6":"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-white transition-transform",style:{transform:p?"translateX(20px)":"translateX(0)"}})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl cursor-pointer transition-all",style:{background:"rgba(255, 255, 255, 0.02)"},onClick:()=>a(!y),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.06)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"rgba(255,255,255,0.6)",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"rgba(255, 255, 255, 0.85)"},children:"High contrast"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.4)"},children:"Increase visibility"})]})]}),e.jsx("div",{className:"w-11 h-6 rounded-full p-0.5 transition-colors",style:{background:y?"#3B82F6":"rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-white transition-transform",style:{transform:y?"translateX(20px)":"translateX(0)"}})})]})]})]}),s&&e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",style:{borderTop:"1px solid rgba(255, 255, 255, 0.06)"},children:[e.jsx("button",{onClick:x,disabled:r,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all disabled:opacity-50",style:{color:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"Cancel"}),e.jsx("button",{onClick:h,disabled:r,className:"px-4 py-2 text-sm font-medium text-white rounded-lg transition-all disabled:opacity-50 flex items-center gap-2",style:{background:"#3B82F6"},children:r?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Applying..."]}):"Apply Theme"})]})]})})};function Dn(t={}){const{rate:o=1,pitch:n=1,volume:l=1,voice:r}=t,[i,s]=c.useState(!1),[g,p]=c.useState([]),[j,y]=c.useState(null),a=c.useRef(null),d=!!(typeof window<"u"&&window.speechSynthesis);c.useEffect(()=>{if(!d){y("Speech synthesis is not supported in this browser");return}const u=()=>{const f=window.speechSynthesis.getVoices();p(f)};return u(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=u),()=>{window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=null)}},[d]);const h=c.useCallback(u=>{if(!d){y("Speech synthesis is not supported");return}window.speechSynthesis.cancel();const f=new SpeechSynthesisUtterance(u);if(r){const b=g.find(m=>m.name===r);b&&(f.voice=b)}f.rate=Math.max(.1,Math.min(10,o)),f.pitch=Math.max(0,Math.min(2,n)),f.volume=Math.max(0,Math.min(1,l)),f.onstart=()=>{s(!0),y(null)},f.onend=()=>{s(!1),a.current=null},f.onerror=b=>{console.error("Speech synthesis error:",b);let m="Speech synthesis error";switch(b.error){case"canceled":m="Speech was canceled";break;case"interrupted":m="Speech was interrupted";break;case"audio-busy":m="Audio device is busy";break;case"audio-hardware":m="Audio hardware error";break;case"network":m="Network error during speech synthesis";break;case"synthesis-unavailable":m="Speech synthesis is unavailable";break;case"synthesis-failed":m="Speech synthesis failed";break;case"language-unavailable":m="Language is not available";break;case"voice-unavailable":m="Voice is not available";break;case"text-too-long":m="Text is too long";break;case"invalid-argument":m="Invalid argument";break;default:m=`Speech synthesis error: ${b.error}`}y(m),s(!1),a.current=null},a.current=f,window.speechSynthesis.speak(f)},[d,r,g,o,n,l]),x=c.useCallback(()=>{d&&(window.speechSynthesis.cancel(),s(!1),a.current=null)},[d]);return c.useEffect(()=>()=>{d&&window.speechSynthesis.cancel()},[d]),{speak:h,stop:x,isSpeaking:i,voices:g,isSupported:d,error:j}}function An(t){const{onTranscript:o,onInterim:n,language:l="en-US",continuous:r=!1}=t,[i,s]=c.useState(!1),[g,p]=c.useState(null),[j,y]=c.useState(""),a=c.useRef(null),d=c.useRef(!1),h=!!(typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition));c.useEffect(()=>{if(!h){p("Speech recognition is not supported in this browser");return}const f=window.SpeechRecognition||window.webkitSpeechRecognition;if(!f)return;const b=new f;return b.continuous=r,b.interimResults=!0,b.lang=l,b.maxAlternatives=1,b.onresult=m=>{let v="",C="";for(let z=m.resultIndex;z<m.results.length;z++){const D=m.results[z],A=D[0].transcript;D.isFinal?C+=A:v+=A}v&&n&&(y(v),n(v)),C&&(o(C),y(""),r||(d.current=!0,b.stop()))},b.onerror=m=>{console.error("Speech recognition error:",m.error);let v="Speech recognition error";switch(m.error){case"no-speech":v="No speech detected. Please try again.";break;case"audio-capture":v="No microphone found. Please connect a microphone.";break;case"not-allowed":v="Microphone access denied. Please grant permission.";break;case"network":v="Network error. Please check your connection.";break;case"aborted":v="Speech recognition aborted.";break;default:v=`Speech recognition error: ${m.error}`}p(v),s(!1)},b.onstart=()=>{s(!0),p(null),y(""),d.current=!1},b.onend=()=>{if(s(!1),y(""),r&&!d.current)try{b.start()}catch(m){console.error("Failed to restart recognition:",m)}},a.current=b,()=>{a.current&&a.current.stop()}},[h,l,r,o,n]);const x=c.useCallback(()=>{if(!(!a.current||i))try{p(null),d.current=!1,a.current.start()}catch(f){console.error("Failed to start speech recognition:",f),p("Failed to start speech recognition")}},[i]),u=c.useCallback(()=>{!a.current||!i||(d.current=!0,a.current.stop())},[i]);return{isListening:i,isSupported:h,startListening:x,stopListening:u,error:g,interimTranscript:j}}const Nn=({config:t,onConfigChange:o})=>{const[n,l]=c.useState(t),[r,i]=c.useState("Hello! This is a test of the text-to-speech system."),{speak:s,stop:g,isSpeaking:p,voices:j,isSupported:y}=Dn({rate:n.tts_rate,pitch:n.tts_pitch,voice:n.tts_voice}),{isSupported:a}=An({onTranscript:()=>{},language:n.language});c.useEffect(()=>{l(t)},[t]);const d=f=>{const b={...n,...f};l(b),o(b)},h=()=>{p?g():s(r)},x=j.filter(f=>f.lang.startsWith("en")),u=j.filter(f=>!f.lang.startsWith("en"));return e.jsx(de,{title:"Voice Integration",description:"Configure speech-to-text and text-to-speech features",iconColor:"from-orange-500 to-amber-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Enable Voice Features"}),e.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Turn on voice input and output capabilities"})]}),e.jsx("button",{onClick:()=>d({enabled:!n.enabled}),className:`
              relative inline-flex h-6 w-11 items-center rounded-full transition-colors
              ${n.enabled?"bg-accent":"bg-border-primary"}
            `,"aria-label":"Toggle voice features",children:e.jsx("span",{className:`
                inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                ${n.enabled?"translate-x-6":"translate-x-1"}
              `})})]}),(!a||!y)&&e.jsx("div",{className:"rounded-lg bg-warning/10 border border-warning/30 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-warning flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"Limited Browser Support"}),e.jsxs("p",{className:"text-xs text-text-secondary",children:[!a&&"Speech-to-text is not supported in this browser. ",!y&&"Text-to-speech is not supported in this browser. ","For best results, use Chrome, Edge, or Safari."]})]})]})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Speech-to-Text"}),!a&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-error/20 text-error border border-error/30",children:"Not Supported"})]}),e.jsx("button",{onClick:()=>d({stt_enabled:!n.stt_enabled}),disabled:!n.enabled||!a,className:`
                  relative inline-flex h-6 w-11 items-center rounded-full transition-colors
                  ${n.stt_enabled&&n.enabled?"bg-accent":"bg-border-primary"}
                  disabled:opacity-50 disabled:cursor-not-allowed
                `,"aria-label":"Toggle speech-to-text",children:e.jsx("span",{className:`
                    inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                    ${n.stt_enabled&&n.enabled?"translate-x-6":"translate-x-1"}
                  `})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-secondary mb-2 block",children:"Recognition Language"}),e.jsxs("select",{value:n.language,onChange:f=>d({language:f.target.value}),disabled:!n.enabled||!n.stt_enabled||!a,className:"w-full px-3 py-2 rounded-lg bg-surface-secondary border border-border-primary text-sm text-text-primary disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-accent transition-colors",children:[e.jsx("option",{value:"en-US",children:"English (US)"}),e.jsx("option",{value:"en-GB",children:"English (UK)"}),e.jsx("option",{value:"es-ES",children:"Spanish (Spain)"}),e.jsx("option",{value:"es-MX",children:"Spanish (Mexico)"}),e.jsx("option",{value:"fr-FR",children:"French"}),e.jsx("option",{value:"de-DE",children:"German"}),e.jsx("option",{value:"it-IT",children:"Italian"}),e.jsx("option",{value:"pt-BR",children:"Portuguese (Brazil)"}),e.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),e.jsx("option",{value:"ja-JP",children:"Japanese"}),e.jsx("option",{value:"ko-KR",children:"Korean"})]})]})]}),e.jsx("div",{className:"border-t border-border-primary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Text-to-Speech"}),!y&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-error/20 text-error border border-error/30",children:"Not Supported"})]}),e.jsx("button",{onClick:()=>d({tts_enabled:!n.tts_enabled}),disabled:!n.enabled||!y,className:`
                  relative inline-flex h-6 w-11 items-center rounded-full transition-colors
                  ${n.tts_enabled&&n.enabled?"bg-accent":"bg-border-primary"}
                  disabled:opacity-50 disabled:cursor-not-allowed
                `,"aria-label":"Toggle text-to-speech",children:e.jsx("span",{className:`
                    inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                    ${n.tts_enabled&&n.enabled?"translate-x-6":"translate-x-1"}
                  `})})]}),j.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-text-secondary mb-2 block",children:"Voice"}),e.jsxs("select",{value:n.tts_voice||"",onChange:f=>d({tts_voice:f.target.value}),disabled:!n.enabled||!n.tts_enabled||!y,className:"w-full px-3 py-2 rounded-lg bg-surface-secondary border border-border-primary text-sm text-text-primary disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-accent transition-colors",children:[e.jsx("option",{value:"",children:"Default"}),x.length>0&&e.jsx("optgroup",{label:"English",children:x.map(f=>e.jsxs("option",{value:f.name,children:[f.name," (",f.lang,")"]},f.name))}),u.length>0&&e.jsx("optgroup",{label:"Other Languages",children:u.map(f=>e.jsxs("option",{value:f.name,children:[f.name," (",f.lang,")"]},f.name))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs text-text-secondary",children:"Speech Rate"}),e.jsxs("span",{className:"text-xs text-text-primary font-mono",children:[n.tts_rate.toFixed(1),"x"]})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:n.tts_rate,onChange:f=>d({tts_rate:parseFloat(f.target.value)}),disabled:!n.enabled||!n.tts_enabled||!y,className:"w-full h-2 bg-surface-secondary rounded-lg appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs text-text-secondary",children:"Speech Pitch"}),e.jsx("span",{className:"text-xs text-text-primary font-mono",children:n.tts_pitch.toFixed(1)})]}),e.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:n.tts_pitch,onChange:f=>d({tts_pitch:parseFloat(f.target.value)}),disabled:!n.enabled||!n.tts_enabled||!y,className:"w-full h-2 bg-surface-secondary rounded-lg appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-xs text-text-secondary mb-2 block",children:"Test Text-to-Speech"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),disabled:!n.enabled||!n.tts_enabled||!y,className:"flex-1 px-3 py-2 rounded-lg bg-surface-secondary border border-border-primary text-sm text-text-primary disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:border-accent transition-colors",placeholder:"Enter text to test..."}),e.jsx("button",{onClick:h,disabled:!n.enabled||!n.tts_enabled||!y||!r,className:"px-4 py-2 rounded-lg bg-accent hover:bg-accent-hover text-white text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),"Stop"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),"Test"]})})]})]})]})]})]})})},Rn=()=>{const[t,o]=c.useState(null),[n,l]=c.useState(null),[r,i]=c.useState(!0),[s,g]=c.useState(null),[p,j]=c.useState(!1);c.useEffect(()=>{y()},[]);const y=async()=>{i(!0),g(null);try{const[b,m]=await Promise.all([P("/api/v1/config"),P("/api/v1/status")]);o(b),l(m.providers)}catch(b){console.error("Failed to load configuration:",b),g(b instanceof Error?b.message:"Failed to load configuration")}finally{i(!1)}},a=async(b,m)=>{if(t)try{const v={...t,llm:{...t.llm,providers:{...t.llm.providers,[b]:m}}};if(await W("/api/v1/config",v),m.api_key){const C={api_key:m.api_key};await W(`/api/v1/providers/${b}/key`,C)}o(v),f(),setTimeout(y,500)}catch(v){throw console.error("Failed to update provider:",v),v}},d=async b=>{try{return(await P(`/api/v1/providers/${b}/status`)).online}catch(m){return console.error("Failed to test connection:",m),!1}},h=async b=>{if(t)try{const m={...t,llm:{...t.llm,default_provider:b}};await W("/api/v1/config",m),o(m),f()}catch(m){throw console.error("Failed to update default provider:",m),m}},x=async b=>{if(t)try{const m={...t,tui:{...t.tui,theme:b}};await W("/api/v1/config",m),o(m),f(),document.documentElement.setAttribute("data-theme",b)}catch(m){throw console.error("Failed to update theme:",m),m}},u=async b=>{if(t)try{const m={...t,voice:b};await W("/api/v1/config",m),o(m),f()}catch(m){throw console.error("Failed to update voice config:",m),m}},f=()=>{j(!0),setTimeout(()=>j(!1),3e3)};return r?e.jsx("div",{className:"min-h-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/5 mb-4",children:e.jsxs("svg",{className:"w-8 h-8 text-accent animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Loading settings..."})]})}):s||!t||!n?e.jsx("div",{className:"min-h-full p-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx("div",{className:"rounded-xl bg-error/10 border border-error/30 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("svg",{className:"w-6 h-6 text-error flex-shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-error mb-2",children:"Failed to Load Settings"}),e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:s||"Unable to connect to the Cortex server"}),e.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-white bg-accent hover:bg-accent-hover rounded-lg transition-all",children:"Retry"})]})]})})})}):e.jsxs("div",{className:"min-h-full p-8 animate-fade-in",children:[e.jsx("div",{className:"mb-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"rgba(255, 255, 255, 0.95)"},children:"Settings"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.5)"},children:"Configure Cortex AI assistant preferences"})]}),p&&e.jsxs("div",{className:"animate-slide-down px-4 py-2 rounded-xl flex items-center gap-2",style:{background:"rgba(34, 197, 94, 0.15)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"#22C55E",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-sm font-medium",style:{color:"#22C55E"},children:"Settings saved"})]})]})}),e.jsxs("div",{className:"max-w-4xl space-y-8",children:[e.jsx(mn,{providers:t.llm.providers,providerStatus:n,onUpdateProvider:a,onTestConnection:d}),e.jsx(Cn,{defaultProvider:t.llm.default_provider,providers:t.llm.providers,onUpdateDefaultProvider:h}),e.jsx(Bn,{currentTheme:t.tui.theme,onUpdateTheme:x}),e.jsx(Nn,{config:t.voice||{enabled:!1,stt_enabled:!1,tts_enabled:!1,tts_rate:1,tts_pitch:1,language:"en-US"},onConfigChange:u}),e.jsx("div",{className:"rounded-2xl p-6",style:{background:"linear-gradient(135deg, rgba(239,68,68,0.05) 0%, rgba(239,68,68,0.02) 100%)",border:"1px solid rgba(239,68,68,0.15)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:"rgba(239,68,68,0.15)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"#EF4444",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-0.5",style:{color:"rgba(255, 255, 255, 0.9)"},children:"Reset All Settings"}),e.jsx("p",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.45)"},children:"Restore defaults. This cannot be undone."})]})]}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all",style:{color:"#EF4444",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)"},children:"Reset"})]})})]}),e.jsx("div",{className:"mt-10 max-w-4xl",children:e.jsxs("div",{className:"rounded-xl px-4 py-3 flex items-center gap-3",style:{background:"rgba(59, 130, 246, 0.06)",border:"1px solid rgba(59, 130, 246, 0.12)"},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"rgba(59, 130, 246, 0.15)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"#60A5FA",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("p",{className:"text-xs",style:{color:"rgba(255, 255, 255, 0.55)"},children:["Settings stored in"," ",e.jsx("code",{className:"font-mono px-1.5 py-0.5 rounded",style:{background:"rgba(255, 255, 255, 0.08)"},children:"~/.cortex/config.yaml"}),". API keys are encrypted and stored in your system keychain."]})]})})]})};function Tn(t,o,n,l){const r=new AbortController,i={...t,stream:!0};return fetch(`${qe}/api/v1/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),signal:r.signal}).then(async s=>{if(!s.ok){const y=await s.text();throw new Error(`HTTP ${s.status}: ${y}`)}if(!s.body)throw new Error("No response body for streaming");const g=s.body.getReader(),p=new TextDecoder;let j="";try{for(;;){const{done:y,value:a}=await g.read();if(y){n();break}j+=p.decode(a,{stream:!0});const d=j.split(`
`);j=d.pop()||"";for(const h of d)if(h.startsWith("data: ")){const x=h.slice(6);if(!x.trim()||x.startsWith(":"))continue;try{const u=JSON.parse(x);if(o(u),u.type==="end"){n(),g.cancel();return}if(u.type==="error"){l(new Error(u.error||"Unknown streaming error")),g.cancel();return}}catch(u){console.error("Failed to parse SSE chunk:",x,u)}}}}catch(y){r.signal.aborted||l(y instanceof Error?y:new Error("Stream read error"))}}).catch(s=>{r.signal.aborted||l(s instanceof Error?s:new Error("Stream fetch error"))}),()=>{r.abort()}}async function Mn(){return P("/api/v1/chat/conversations")}async function In(t){return P(`/api/v1/chat/conversations/${t}`)}async function _n(t){return Fe(`/api/v1/chat/conversations/${t}`)}async function Wn(t){return W(`/api/v1/chat/conversations/${t}/mode/reset`,{})}function Ln(t){const o=new Date(t),l=new Date().getTime()-o.getTime(),r=Math.floor(l/6e4);if(r<1)return"Just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:o.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const Pn={normal:$,debugging:Me,teaching:je,recovery:Le,review:_e,scripting:le},$n=t=>({normal:"#9CA3AF",debugging:"#EF4444",teaching:"#3B82F6",recovery:"#F59E0B",review:"#8B5CF6",scripting:"#10B981"})[t.toLowerCase()]||"#9CA3AF",Be=({message:t})=>{const o=t.role==="user";return e.jsx("div",{style:{display:"flex",justifyContent:o?"flex-end":"flex-start",marginBottom:"16px"},children:e.jsxs("div",{style:{maxWidth:"70%",display:"flex",flexDirection:"column",alignItems:o?"flex-end":"flex-start"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderRadius:"16px",backgroundColor:o?"#3B82F6":"#FFFFFF",color:o?"#FFFFFF":"#1D1D1F",border:o?"none":"1px solid #E5E5E7",boxShadow:o?"none":"0 1px 3px rgba(0, 0, 0, 0.05)",wordBreak:"break-word",whiteSpace:"pre-wrap"},children:[!o&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"8px",borderBottom:"1px solid #F0F0F2"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",backgroundColor:"rgba(139, 92, 242, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(kt,{size:14,style:{color:"#8B5CF6"}})}),e.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"#1D1D1F"},children:"Assistant"}),t.model&&e.jsx("span",{style:{fontSize:"11px",color:"#9CA3AF",fontFamily:"monospace",backgroundColor:"#F3F4F6",padding:"2px 6px",borderRadius:"4px"},children:t.model})]}),e.jsx("div",{style:{fontSize:"15px",lineHeight:"1.5"},children:t.content}),!o&&(t.routing||t.mode_info)&&e.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #F0F0F2",display:"flex",alignItems:"center",gap:"8px",fontSize:"11px",color:"#6B7280",flexWrap:"wrap"},children:[t.mode_info&&t.mode_info.current_mode!=="normal"&&e.jsx(e.Fragment,{children:(()=>{const n=t.mode_info.current_mode.toLowerCase(),l=Pn[n]||$,r=$n(n);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 6px",backgroundColor:`${r}15`,borderRadius:"4px",color:r,fontWeight:500},children:[e.jsx(l,{size:10}),e.jsx("span",{children:t.mode_info.mode_name})]}),t.routing&&e.jsx("span",{children:""})]})})()}),t.routing&&e.jsxs(e.Fragment,{children:[t.routing.lane==="fast"?e.jsx(Z,{size:12,style:{color:"#F59E0B"}}):e.jsx(se,{size:12,style:{color:"#8B5CF6"}}),e.jsxs("span",{style:{fontWeight:500,textTransform:"capitalize"},children:[t.routing.lane," lane"]}),e.jsx("span",{children:""}),e.jsx("span",{children:t.routing.reason}),t.routing.latency_ms&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[t.routing.latency_ms,"ms"]})]})]})]})]}),e.jsxs("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[o&&e.jsx(He,{size:10,style:{color:"#9CA3AF"}}),Ln(t.timestamp)]})]})})};function On(t){const o=new Date(t),l=new Date().getTime()-o.getTime(),r=Math.floor(l/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:o.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const Hn=({conversations:t,activeConversationId:o,isLoading:n,onSelectConversation:l,onDeleteConversation:r,onNewConversation:i})=>e.jsxs("div",{style:{width:"280px",height:"100%",backgroundColor:"#FFFFFF",borderRight:"1px solid #E5E5E7",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"20px",borderBottom:"1px solid #E5E5E7"},children:e.jsxs("button",{onClick:i,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.15s"},children:[e.jsx(H,{size:18}),e.jsx("span",{children:"New Chat"})]})}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:n?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px"},children:e.jsx(L,{size:24,style:{color:"#9CA3AF",animation:"spin 1s linear infinite"}})}):t.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:e.jsx($,{size:24,style:{color:"#9CA3AF"}})}),e.jsx("p",{style:{fontSize:"13px",color:"#6B7280"},children:"No conversations yet"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:t.map(s=>{const g=s.id===o;return e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",gap:"8px",padding:"12px",backgroundColor:g?"#F3F4F6":"transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.15s",border:g?"1px solid #E5E5E7":"1px solid transparent"},onClick:()=>l(s.id),onMouseEnter:p=>{g||(p.currentTarget.style.backgroundColor="#FAFAFA")},onMouseLeave:p=>{g||(p.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:g?"#3B82F6":"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx($,{size:16,style:{color:g?"#FFFFFF":"#6B7280"}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{fontSize:"13px",fontWeight:500,color:"#1D1D1F",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.title}),e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:On(s.updated_at)})]}),e.jsx("button",{onClick:p=>{p.stopPropagation(),confirm("Delete this conversation?")&&r(s.id)},style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",opacity:0,transition:"all 0.15s"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#FEE2E2",p.currentTarget.style.opacity="1"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.opacity="0"},children:e.jsx(X,{size:14,style:{color:"#EF4444"}})})]},s.id)})})})]}),qn={normal:$,debugging:Me,teaching:je,recovery:Le,review:_e,scripting:le},De={normal:{bg:"rgba(255, 255, 255, 0.05)",border:"var(--border-color)",text:"var(--text-secondary)",icon:"var(--text-secondary)"},debugging:{bg:"rgba(255, 69, 58, 0.1)",border:"rgba(255, 69, 58, 0.2)",text:"var(--error)",icon:"var(--error)"},teaching:{bg:"rgba(10, 132, 255, 0.1)",border:"rgba(10, 132, 255, 0.2)",text:"var(--accent-primary)",icon:"var(--accent-primary)"},recovery:{bg:"rgba(255, 214, 10, 0.1)",border:"rgba(255, 214, 10, 0.2)",text:"var(--warning)",icon:"var(--warning)"},review:{bg:"rgba(191, 90, 242, 0.1)",border:"rgba(191, 90, 242, 0.2)",text:"var(--ai-primary)",icon:"var(--ai-primary)"},scripting:{bg:"rgba(48, 209, 88, 0.1)",border:"rgba(48, 209, 88, 0.2)",text:"var(--success)",icon:"var(--success)"}},Vn=({modeInfo:t,onReset:o})=>{const[n,l]=c.useState(!1);if(!t)return null;const r=t.current_mode.toLowerCase(),i=qn[r]||$,s=De[r]||De.normal,g=r==="normal";return e.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center"},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",backgroundColor:s.bg,border:`1px solid ${s.border}`,borderRadius:"var(--radius-sm)",color:s.text,fontSize:"13px",fontWeight:600,transition:"all 0.2s var(--ease-apple)",cursor:"default"},className:"animate-in",children:[e.jsx(i,{size:14,style:{color:s.icon}}),e.jsx("span",{children:t.mode_name}),!g&&o&&e.jsx("button",{onClick:p=>{p.stopPropagation(),o()},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",padding:0,marginLeft:"4px",backgroundColor:"transparent",border:"none",borderRadius:"4px",color:s.text,cursor:"pointer",transition:"all 0.15s var(--ease-apple)"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},title:"Reset to normal mode",children:e.jsx(M,{size:12})})]}),n&&t.mode_description&&e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",left:"50%",transform:"translateX(-50%)",maxWidth:"280px",padding:"12px 16px",backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",fontSize:"12px",color:"var(--text-secondary)",lineHeight:1.5,zIndex:1e3,whiteSpace:"normal",pointerEvents:"none"},className:"animate-slide-down",children:[t.mode_description,e.jsx("div",{style:{position:"absolute",top:"-5px",left:"50%",transform:"translateX(-50%) rotate(45deg)",width:"10px",height:"10px",backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRight:"none",borderBottom:"none"}})]})]})},Un=({transition:t,onDismiss:o})=>{const[n,l]=c.useState(!0);return c.useEffect(()=>{const r=setTimeout(()=>{l(!1),setTimeout(o,300)},3e3);return()=>clearTimeout(r)},[o]),e.jsx("div",{style:{position:"fixed",bottom:"24px",right:"24px",zIndex:9999,transform:n?"translateY(0)":"translateY(20px)",opacity:n?1:0,transition:"all 0.3s var(--ease-apple)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 18px",backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",minWidth:"320px",maxWidth:"400px"},className:"animate-slide-up",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"var(--radius-sm)",backgroundColor:"rgba(10, 132, 255, 0.1)",color:"var(--accent-primary)",flexShrink:0},children:e.jsx(U,{size:16})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Mode Changed"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[e.jsx("span",{style:{padding:"2px 8px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",fontWeight:500},children:t.from}),e.jsx(bt,{size:12}),e.jsx("span",{style:{padding:"2px 8px",backgroundColor:"rgba(10, 132, 255, 0.1)",borderRadius:"4px",fontWeight:600,color:"var(--accent-primary)"},children:t.to})]}),t.trigger&&e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-tertiary)",marginTop:"4px"},children:["Triggered by:"," ",e.jsxs("span",{style:{fontFamily:"var(--font-mono)",color:"var(--text-secondary)"},children:['"',t.trigger,'"']})]})]}),e.jsx("button",{onClick:()=>{l(!1),setTimeout(o,300)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",padding:0,backgroundColor:"transparent",border:"none",borderRadius:"4px",color:"var(--text-tertiary)",cursor:"pointer",transition:"all 0.15s var(--ease-apple)",flexShrink:0},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",r.currentTarget.style.color="var(--text-secondary)"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="var(--text-tertiary)"},children:""})]})})},Kn=()=>{const[t,o]=c.useState([]),[n,l]=c.useState(null),[r,i]=c.useState([]),[s,g]=c.useState(""),[p,j]=c.useState(!1),[y,a]=c.useState(!1),[d,h]=c.useState(null),[x,u]=c.useState(""),[f,b]=c.useState(null),[m,v]=c.useState(null),[C,z]=c.useState("auto"),[D,A]=c.useState(null),[I,E]=c.useState(null),T=c.useRef(null),N=c.useRef(null),w=c.useRef(""),S=c.useRef(null),q=c.useRef(null),ce=c.useRef(null),pe=c.useCallback(async()=>{try{j(!0);const k=await Mn();o(k.conversations)}catch(k){h(k instanceof Error?k.message:"Failed to load conversations")}finally{j(!1)}},[]);c.useEffect(()=>{pe()},[pe]),c.useEffect(()=>{var k;(k=T.current)==null||k.scrollIntoView({behavior:"smooth"})},[r,x]);const Ke=async k=>{try{h(null);const _=await In(k);i(_.messages),l(k)}catch(_){h(_ instanceof Error?_.message:"Failed to load conversation")}},ke=()=>{l(null),i([]),u(""),b(null),h(null),A(null),E(null)},Qe=k=>{k!==n&&Ke(k)},Ge=async k=>{try{await _n(k),o(_=>_.filter(xe=>xe.id!==k)),k===n&&ke()}catch(_){h(_ instanceof Error?_.message:"Failed to delete conversation")}},Ce=async()=>{const k=s.trim();if(!k||y)return;g(""),h(null),a(!0);const _={id:`temp-${Date.now()}`,role:"user",content:k,timestamp:new Date().toISOString()};i(B=>[...B,_]),u(""),b(null),v(null),w.current="",S.current=null,q.current=null;const xe=Tn({message:k,conversation_id:n||void 0,lane:C,stream:!0},B=>{var K;if(B.type==="start"){if(b(B.message_id||null),v(B.routing||null),S.current=B.message_id||null,q.current=B.routing||null,B.conversation_id&&!n&&l(B.conversation_id),B.mode_info){const V=((K=ce.current)==null?void 0:K.current_mode)||"normal";A(B.mode_info),ce.current=B.mode_info,B.mode_info.transition?E(B.mode_info.transition):V!==B.mode_info.current_mode&&E({from:V,to:B.mode_info.current_mode,trigger:"auto",trigger_type:"keyword"})}}else if(B.type==="delta"){const V=B.content||"";w.current+=V,u(ue=>ue+V)}},()=>{const B=S.current,K=w.current,V=q.current,ue=ce.current;if(B&&K){const Xe={id:B,role:"assistant",content:K,timestamp:new Date().toISOString(),routing:V||void 0,mode_info:ue||void 0};i(Ze=>[...Ze,Xe])}u(""),b(null),v(null),w.current="",S.current=null,q.current=null,a(!1),N.current=null,pe()},B=>{h(B.message),u(""),b(null),v(null),w.current="",S.current=null,q.current=null,a(!1),N.current=null});N.current=xe},Ye=async()=>{if(n)try{const k=await Wn(n);A(k),E({from:(D==null?void 0:D.current_mode)||"unknown",to:k.current_mode,trigger:"manual reset",trigger_type:"reset"})}catch(k){h(k instanceof Error?k.message:"Failed to reset mode")}},Je=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),Ce())};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 60px)",overflow:"hidden"},children:[e.jsx(Hn,{conversations:t,activeConversationId:n,isLoading:p,onSelectConversation:Qe,onDeleteConversation:Ge,onNewConversation:ke}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid #E5E5E7",backgroundColor:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($,{size:20,style:{color:"#FFFFFF"}})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F"},children:"Chat"}),e.jsx("p",{style:{fontSize:"12px",color:"#6B7280"},children:"AI-powered conversation"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[n&&D&&e.jsx(Vn,{modeInfo:D,onReset:Ye,conversationId:n}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:["auto","fast","smart"].map(k=>e.jsxs("button",{onClick:()=>z(k),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:C===k?"#3B82F6":"#F3F4F6",color:C===k?"#FFFFFF":"#6B7280",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:500,cursor:"pointer",transition:"all 0.15s"},children:[k==="fast"&&e.jsx(Z,{size:14}),k==="smart"&&e.jsx(se,{size:14}),k==="auto"&&e.jsx(U,{size:14}),e.jsx("span",{style:{textTransform:"capitalize"},children:k})]},k))})]})]}),d&&e.jsxs("div",{style:{margin:"16px 24px",padding:"12px 16px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",borderRadius:"10px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(J,{size:18,style:{color:"#EF4444",flexShrink:0}}),e.jsx("p",{style:{fontSize:"13px",color:"#DC2626"},children:d})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"24px",backgroundColor:"#FAFAFA"},children:r.length===0&&!x?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"20px",background:"linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:e.jsx($,{size:40,style:{color:"#FFFFFF"}})}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",marginBottom:"8px"},children:"Start a Conversation"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",maxWidth:"400px"},children:"Ask me anything! I can help with coding, planning, research, and more."})]}):e.jsxs(e.Fragment,{children:[r.map(k=>e.jsx(Be,{message:k},k.id)),x&&e.jsx(Be,{message:{id:f||"streaming",role:"assistant",content:x,timestamp:new Date().toISOString(),routing:m||void 0}}),e.jsx("div",{ref:T})]})}),e.jsx("div",{style:{padding:"16px 24px",backgroundColor:"#FFFFFF",borderTop:"1px solid #E5E5E7"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[e.jsx("textarea",{value:s,onChange:k=>g(k.target.value),onKeyDown:Je,placeholder:"Type a message... (Shift+Enter for new line)",disabled:y,rows:1,style:{flex:1,padding:"12px 16px",backgroundColor:"#FAFAFA",border:"1px solid #E5E5E7",borderRadius:"12px",fontSize:"15px",color:"#1D1D1F",outline:"none",resize:"none",fontFamily:"inherit",lineHeight:"1.5",minHeight:"48px",maxHeight:"200px"}}),e.jsx("button",{onClick:Ce,disabled:!s.trim()||y,style:{padding:"12px 20px",backgroundColor:s.trim()&&!y?"#3B82F6":"#E5E5E7",color:s.trim()&&!y?"#FFFFFF":"#9CA3AF",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,cursor:s.trim()&&!y?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.15s",height:"48px"},children:y?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:18,style:{animation:"spin 1s linear infinite"}}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(br,{size:18}),e.jsx("span",{children:"Send"})]})})]})})]}),I&&e.jsx(Un,{transition:I,onDismiss:()=>E(null)})]})};async function Qn(){return P("/api/v1/personas")}async function Gn(t){return W("/api/v1/personas",t)}async function Yn(t,o){return Vr(`/api/v1/personas/${t}`,o)}async function Jn(t){return Fe(`/api/v1/personas/${t}`)}async function Xn(t){return W(`/api/v1/personas/${t}/preview`)}const R={personas:["personas"],persona:t=>["personas",t],preview:t=>["personas",t,"preview"]};function Zn(){return ne({queryKey:R.personas,queryFn:Qn,staleTime:1e3*60*5})}function eo(t){return ne({queryKey:R.preview(t),queryFn:()=>Xn(t),enabled:!1,staleTime:0})}function to(){const t=Y();return oe({mutationFn:Gn,onSuccess:()=>{t.invalidateQueries({queryKey:R.personas})}})}function ro(){const t=Y();return oe({mutationFn:({id:o,data:n})=>Yn(o,n),onMutate:async({id:o,data:n})=>{await t.cancelQueries({queryKey:R.persona(o)});const l=t.getQueryData(R.persona(o));return l&&t.setQueryData(R.persona(o),{...l,...n}),{previousPersona:l}},onError:(o,{id:n},l)=>{const r=l;r!=null&&r.previousPersona&&t.setQueryData(R.persona(n),r.previousPersona)},onSuccess:(o,{id:n})=>{t.setQueryData(R.persona(n),o),t.invalidateQueries({queryKey:R.personas})}})}function no(){const t=Y();return oe({mutationFn:Jn,onMutate:async o=>{await t.cancelQueries({queryKey:R.personas});const n=t.getQueryData(R.personas);return n&&t.setQueryData(R.personas,{personas:n.personas.filter(l=>l.id!==o)}),{previousPersonas:n}},onError:(o,n,l)=>{const r=l;r!=null&&r.previousPersonas&&t.setQueryData(R.personas,r.previousPersonas)},onSuccess:()=>{t.invalidateQueries({queryKey:R.personas})}})}const Ae=({personas:t,onEdit:o,onDelete:n})=>{const l=r=>{r.is_built_in||confirm(`Are you sure you want to delete "${r.name}"?`)&&n(r.id)};return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"16px"},children:t.map(r=>e.jsxs("div",{style:{backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"12px",padding:"20px",transition:"all 0.15s",position:"relative"},onMouseEnter:i=>{i.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)",i.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:i=>{i.currentTarget.style.boxShadow="none",i.currentTarget.style.transform="translateY(0)"},children:[r.is_built_in&&e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#EEF2FF",borderRadius:"6px",fontSize:"11px",fontWeight:500,color:"#4F46E5"},children:[e.jsx($e,{size:12}),"Built-in"]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"4px"},children:r.name}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"12px"},children:r.role}),r.background&&e.jsx("p",{style:{fontSize:"13px",color:"#9CA3AF",lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.background})]}),r.traits&&r.traits.length>0&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[r.traits.slice(0,3).map(i=>e.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#F3F4F6",borderRadius:"6px",fontSize:"12px",color:"#1D1D1F"},children:i},i)),r.traits.length>3&&e.jsxs("span",{style:{padding:"4px 8px",backgroundColor:"#F3F4F6",borderRadius:"6px",fontSize:"12px",color:"#6B7280"},children:["+",r.traits.length-3]})]})}),r.expertise&&r.expertise.length>0&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("p",{style:{fontSize:"12px",color:"#6B7280"},children:[r.expertise.length," expertise domain",r.expertise.length!==1?"s":""]})}),r.modes&&r.modes.length>0&&e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("p",{style:{fontSize:"12px",color:"#6B7280"},children:[r.modes.length," behavioral mode",r.modes.length!==1?"s":""]})}),e.jsxs("div",{style:{display:"flex",gap:"8px",paddingTop:"16px",borderTop:"1px solid #F3F4F6"},children:[e.jsxs("button",{type:"button",onClick:()=>o(r),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",fontWeight:500,color:"#1D1D1F",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#3B82F6",i.currentTarget.style.borderColor="#3B82F6",i.currentTarget.style.color="#FFFFFF"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#F9FAFB",i.currentTarget.style.borderColor="#E5E5E7",i.currentTarget.style.color="#1D1D1F"},children:[e.jsx(We,{size:14}),"Edit"]}),e.jsxs("button",{type:"button",onClick:()=>l(r),disabled:r.is_built_in,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",backgroundColor:r.is_built_in?"#F9FAFB":"#FEF2F2",border:`1px solid ${r.is_built_in?"#E5E5E7":"#FECACA"}`,borderRadius:"8px",fontSize:"13px",fontWeight:500,color:r.is_built_in?"#9CA3AF":"#DC2626",cursor:r.is_built_in?"not-allowed":"pointer",transition:"all 0.15s",opacity:r.is_built_in?.5:1},onMouseEnter:i=>{r.is_built_in||(i.currentTarget.style.backgroundColor="#FEE2E2",i.currentTarget.style.borderColor="#FCA5A5")},onMouseLeave:i=>{r.is_built_in||(i.currentTarget.style.backgroundColor="#FEF2F2",i.currentTarget.style.borderColor="#FECACA")},children:[e.jsx(X,{size:14}),"Delete"]})]}),e.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #F3F4F6"},children:e.jsxs("p",{style:{fontSize:"11px",color:"#9CA3AF"},children:["Updated ",new Date(r.updated_at).toLocaleDateString()]})})]},r.id))})},oo=({name:t,role:o,background:n,traits:l,values:r,onChange:i})=>{const s=y=>{if(y.key==="Enter"){const a=y.currentTarget,d=a.value.trim();d&&!l.includes(d)&&(i("traits",[...l,d]),a.value="")}},g=y=>{i("traits",l.filter(a=>a!==y))},p=y=>{if(y.key==="Enter"){const a=y.currentTarget,d=a.value.trim();d&&!r.includes(d)&&(i("values",[...r,d]),a.value="")}},j=y=>{i("values",r.filter(a=>a!==y))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"persona-name",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Name *"}),e.jsx("input",{id:"persona-name",type:"text",value:t,onChange:y=>i("name",y.target.value),placeholder:"e.g., Technical Architect",required:!0,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"persona-role",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Role *"}),e.jsx("input",{id:"persona-role",type:"text",value:o,onChange:y=>i("role",y.target.value),placeholder:"e.g., Senior Software Engineer",required:!0,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"persona-background",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Background"}),e.jsx("textarea",{id:"persona-background",value:n,onChange:y=>i("background",y.target.value),placeholder:"Describe the persona's background, experience, and expertise...",rows:4,style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none",resize:"vertical",fontFamily:"inherit"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"persona-traits",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Traits"}),e.jsx("input",{id:"persona-traits",type:"text",onKeyDown:s,placeholder:"Type a trait and press Enter (e.g., analytical, creative)",style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}}),l.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"12px"},children:l.map(y=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#F3F4F6",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F"},children:[y,e.jsx("button",{type:"button",onClick:()=>g(y),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#6B7280"},children:e.jsx(M,{size:14})})]},y))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"persona-values",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Values"}),e.jsx("input",{id:"persona-values",type:"text",onKeyDown:p,placeholder:"Type a value and press Enter (e.g., honesty, efficiency)",style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}}),r.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"12px"},children:r.map(y=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#EEF2FF",borderRadius:"8px",fontSize:"14px",color:"#4F46E5"},children:[y,e.jsx("button",{type:"button",onClick:()=>j(y),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#818CF8"},children:e.jsx(M,{size:14})})]},y))})]})]})},so=({expertise:t,onChange:o})=>{const[n,l]=c.useState(null),r=()=>{const a={domain:"",depth:"proficient",specialties:[],boundaries:[]};o([...t,a]),l(t.length)},i=a=>{o(t.filter((d,h)=>h!==a)),n===a&&l(null)},s=(a,d,h)=>{const x=[...t];x[a]={...x[a],[d]:h},o(x)},g=(a,d)=>{var x;const h=t[a];d&&!((x=h.specialties)!=null&&x.includes(d))&&s(a,"specialties",[...h.specialties||[],d])},p=(a,d)=>{const h=t[a];s(a,"specialties",(h.specialties||[]).filter(x=>x!==d))},j=(a,d)=>{var x;const h=t[a];d&&!((x=h.boundaries)!=null&&x.includes(d))&&s(a,"boundaries",[...h.boundaries||[],d])},y=(a,d)=>{const h=t[a];s(a,"boundaries",(h.boundaries||[]).filter(x=>x!==d))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("button",{type:"button",onClick:r,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:"pointer",alignSelf:"flex-start"},children:[e.jsx(H,{size:18}),"Add Domain"]}),t.length===0?e.jsx("div",{style:{padding:"40px 20px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px dashed #E5E5E7",textAlign:"center"},children:e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:'No expertise domains yet. Click "Add Domain" to start.'})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((a,d)=>e.jsxs("div",{style:{padding:"16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[e.jsx("input",{type:"text",value:a.domain,onChange:h=>s(d,"domain",h.target.value),placeholder:"Domain name (e.g., TypeScript, React)",style:{flex:1,padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none"}}),e.jsxs("select",{value:a.depth,onChange:h=>s(d,"depth",h.target.value),style:{padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",cursor:"pointer"},children:[e.jsx("option",{value:"familiar",children:"Familiar"}),e.jsx("option",{value:"proficient",children:"Proficient"}),e.jsx("option",{value:"expert",children:"Expert"})]}),e.jsx("button",{type:"button",onClick:()=>i(d),style:{padding:"10px",backgroundColor:"#FEE2E2",border:"none",borderRadius:"8px",cursor:"pointer",color:"#DC2626"},children:e.jsx(X,{size:18})})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Specialties"}),e.jsx("input",{type:"text",onKeyDown:h=>{if(h.key==="Enter"){const x=h.currentTarget.value.trim();x&&(g(d,x),h.currentTarget.value="")}},placeholder:"Type and press Enter",style:{width:"100%",padding:"8px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",color:"#1D1D1F",outline:"none"}}),a.specialties&&a.specialties.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},children:a.specialties.map(h=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#DBEAFE",borderRadius:"6px",fontSize:"12px",color:"#1E40AF"},children:[h,e.jsx("button",{type:"button",onClick:()=>p(d,h),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#60A5FA"},children:e.jsx(M,{size:12})})]},h))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Boundaries (what to avoid)"}),e.jsx("input",{type:"text",onKeyDown:h=>{if(h.key==="Enter"){const x=h.currentTarget.value.trim();x&&(j(d,x),h.currentTarget.value="")}},placeholder:"Type and press Enter",style:{width:"100%",padding:"8px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",color:"#1D1D1F",outline:"none"}}),a.boundaries&&a.boundaries.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},children:a.boundaries.map(h=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#FEE2E2",borderRadius:"6px",fontSize:"12px",color:"#991B1B"},children:[h,e.jsx("button",{type:"button",onClick:()=>y(d,h),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#F87171"},children:e.jsx(M,{size:12})})]},h))})]})]},d))})]})},io=({style:t,onChange:o})=>{const n=t||{tone:"",verbosity:"adaptive",formatting:"markdown",patterns:[],avoids:[]},l=(p,j)=>{o({...n,[p]:j})},r=p=>{if(p.key==="Enter"){const j=p.currentTarget,y=j.value.trim();y&&!(n.patterns||[]).includes(y)&&(l("patterns",[...n.patterns||[],y]),j.value="")}},i=p=>{l("patterns",(n.patterns||[]).filter(j=>j!==p))},s=p=>{if(p.key==="Enter"){const j=p.currentTarget,y=j.value.trim();y&&!(n.avoids||[]).includes(y)&&(l("avoids",[...n.avoids||[],y]),j.value="")}},g=p=>{l("avoids",(n.avoids||[]).filter(j=>j!==p))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style-tone",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Tone"}),e.jsx("input",{id:"style-tone",type:"text",value:n.tone,onChange:p=>l("tone",p.target.value),placeholder:"e.g., professional, friendly, casual",style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style-verbosity",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Verbosity"}),e.jsxs("select",{id:"style-verbosity",value:n.verbosity,onChange:p=>l("verbosity",p.target.value),style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",cursor:"pointer"},children:[e.jsx("option",{value:"concise",children:"Concise - Brief and to the point"}),e.jsx("option",{value:"detailed",children:"Detailed - Comprehensive explanations"}),e.jsx("option",{value:"adaptive",children:"Adaptive - Adjusts based on context"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style-formatting",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Formatting Style"}),e.jsxs("select",{id:"style-formatting",value:n.formatting,onChange:p=>l("formatting",p.target.value),style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",cursor:"pointer"},children:[e.jsx("option",{value:"markdown",children:"Markdown - Rich formatting with headers and lists"}),e.jsx("option",{value:"plain",children:"Plain Text - Simple, unformatted text"}),e.jsx("option",{value:"code-heavy",children:"Code-Heavy - Emphasis on code blocks"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style-patterns",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Communication Patterns (phrases and styles to use)"}),e.jsx("input",{id:"style-patterns",type:"text",onKeyDown:r,placeholder:"Type a pattern and press Enter (e.g., 'Let me explain...', 'Here's how...')",style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}}),n.patterns&&n.patterns.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"12px"},children:n.patterns.map(p=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#D1FAE5",borderRadius:"8px",fontSize:"14px",color:"#065F46"},children:[p,e.jsx("button",{type:"button",onClick:()=>i(p),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#34D399"},children:e.jsx(M,{size:14})})]},p))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"style-avoids",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Avoids (phrases and styles to avoid)"}),e.jsx("input",{id:"style-avoids",type:"text",onKeyDown:s,placeholder:"Type something to avoid and press Enter (e.g., 'jargon', 'passive voice')",style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",outline:"none"}}),n.avoids&&n.avoids.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"12px"},children:n.avoids.map(p=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#FEE2E2",borderRadius:"8px",fontSize:"14px",color:"#991B1B"},children:[p,e.jsx("button",{type:"button",onClick:()=>g(p),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#F87171"},children:e.jsx(M,{size:14})})]},p))})]})]})},lo=({modes:t,defaultMode:o,onChange:n,onDefaultModeChange:l})=>{const[r,i]=c.useState(null),s=()=>{const a={id:`mode_${Date.now()}`,name:"",description:"",prompt_augment:"",entry_keywords:[],exit_keywords:[],manual_trigger:"",force_verbose:!1,force_concise:!1};n([...t,a]),i(t.length)},g=a=>{n(t.filter((d,h)=>h!==a)),r===a&&i(null)},p=(a,d,h)=>{const x=[...t];x[a]={...x[a],[d]:h},n(x)},j=(a,d,h)=>{const x=t[a],u=d==="entry"?"entry_keywords":"exit_keywords",f=x[u]||[];h&&!f.includes(h)&&p(a,u,[...f,h])},y=(a,d,h)=>{const x=t[a],u=d==="entry"?"entry_keywords":"exit_keywords",f=x[u]||[];p(a,u,f.filter(b=>b!==h))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("button",{type:"button",onClick:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:"pointer",alignSelf:"flex-start"},children:[e.jsx(H,{size:18}),"Add Mode"]}),t.length>0&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"default-mode",style:{display:"block",fontSize:"13px",fontWeight:500,color:"#1D1D1F",marginBottom:"8px"},children:"Default Mode"}),e.jsxs("select",{id:"default-mode",value:o||"",onChange:a=>l(a.target.value),style:{width:"100%",padding:"12px 16px",backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"15px",color:"#1D1D1F",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"No default mode"}),t.map(a=>e.jsx("option",{value:a.id,children:a.name||"Unnamed Mode"},a.id))]})]}),t.length===0?e.jsx("div",{style:{padding:"40px 20px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px dashed #E5E5E7",textAlign:"center"},children:e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:'No behavioral modes yet. Click "Add Mode" to start.'})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((a,d)=>{const h=r===d;return e.jsxs("div",{style:{backgroundColor:"#FFFFFF",border:"1px solid #E5E5E7",borderRadius:"12px",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",cursor:"pointer",backgroundColor:h?"#F9FAFB":"#FFFFFF"},onClick:()=>i(h?null:d),children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#1D1D1F"},children:a.name||"Unnamed Mode"}),a.description&&e.jsx("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"2px"},children:a.description})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),g(d)},style:{padding:"6px",backgroundColor:"#FEE2E2",border:"none",borderRadius:"6px",cursor:"pointer",color:"#DC2626"},children:e.jsx(X,{size:16})}),h?e.jsx(Rt,{size:20}):e.jsx(Q,{size:20})]})]}),h&&e.jsx("div",{style:{padding:"16px",borderTop:"1px solid #E5E5E7"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:x=>p(d,"name",x.target.value),placeholder:"e.g., Debug Mode",style:{width:"100%",padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"ID"}),e.jsx("input",{type:"text",value:a.id,onChange:x=>p(d,"id",x.target.value),placeholder:"mode_id",style:{width:"100%",padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Description"}),e.jsx("textarea",{value:a.description||"",onChange:x=>p(d,"description",x.target.value),placeholder:"Describe when and how this mode should be used",rows:2,style:{width:"100%",padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none",resize:"vertical",fontFamily:"inherit"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Prompt Augment"}),e.jsx("textarea",{value:a.prompt_augment||"",onChange:x=>p(d,"prompt_augment",x.target.value),placeholder:"Additional prompt text when in this mode",rows:3,style:{width:"100%",padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none",resize:"vertical",fontFamily:"monospace"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Entry Keywords"}),e.jsx("input",{type:"text",onKeyDown:x=>{if(x.key==="Enter"){const u=x.currentTarget.value.trim();u&&(j(d,"entry",u),x.currentTarget.value="")}},placeholder:"Type and press Enter",style:{width:"100%",padding:"8px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",color:"#1D1D1F",outline:"none"}}),a.entry_keywords&&a.entry_keywords.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},children:a.entry_keywords.map(x=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#D1FAE5",borderRadius:"6px",fontSize:"12px",color:"#065F46"},children:[x,e.jsx("button",{type:"button",onClick:()=>y(d,"entry",x),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#34D399"},children:e.jsx(M,{size:12})})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Exit Keywords"}),e.jsx("input",{type:"text",onKeyDown:x=>{if(x.key==="Enter"){const u=x.currentTarget.value.trim();u&&(j(d,"exit",u),x.currentTarget.value="")}},placeholder:"Type and press Enter",style:{width:"100%",padding:"8px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"13px",color:"#1D1D1F",outline:"none"}}),a.exit_keywords&&a.exit_keywords.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},children:a.exit_keywords.map(x=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#FEE2E2",borderRadius:"6px",fontSize:"12px",color:"#991B1B"},children:[x,e.jsx("button",{type:"button",onClick:()=>y(d,"exit",x),style:{display:"flex",alignItems:"center",padding:0,border:"none",background:"none",cursor:"pointer",color:"#F87171"},children:e.jsx(M,{size:12})})]},x))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,color:"#6B7280",marginBottom:"6px"},children:"Manual Trigger"}),e.jsx("input",{type:"text",value:a.manual_trigger||"",onChange:x=>p(d,"manual_trigger",x.target.value),placeholder:"e.g., /debug",style:{width:"100%",padding:"10px 12px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"8px",fontSize:"14px",color:"#1D1D1F",outline:"none"}})]}),e.jsx("div",{children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:500,color:"#6B7280",cursor:"pointer",marginTop:"22px"},children:[e.jsx("input",{type:"checkbox",checked:a.force_verbose||!1,onChange:x=>p(d,"force_verbose",x.target.checked),style:{cursor:"pointer"}}),"Force Verbose"]})}),e.jsx("div",{children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:500,color:"#6B7280",cursor:"pointer",marginTop:"22px"},children:[e.jsx("input",{type:"checkbox",checked:a.force_concise||!1,onChange:x=>p(d,"force_concise",x.target.checked),style:{cursor:"pointer"}}),"Force Concise"]})})]})]})})]},d)})})]})},ao=({personaId:t,compiledPrompt:o,isLoading:n,onRefresh:l})=>{const[r,i]=c.useState(!1),s=async()=>{o&&(await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",height:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("button",{type:"button",onClick:l,disabled:!t||n,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:t&&!n?"#3B82F6":"#E5E5E7",color:t&&!n?"#FFFFFF":"#9CA3AF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:t&&!n?"pointer":"not-allowed"},children:[e.jsx(ve,{size:16,style:{animation:n?"spin 1s linear infinite":"none"}}),n?"Loading...":"Refresh Preview"]}),o&&e.jsx("button",{type:"button",onClick:s,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:r?"#D1FAE5":"#F9FAFB",color:r?"#065F46":"#1D1D1F",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:16}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ot,{size:16}),"Copy"]})})]}),o?e.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px",backgroundColor:"#1E1E1E",borderRadius:"12px",border:"1px solid #E5E5E7"},children:e.jsx("pre",{style:{margin:0,fontSize:"13px",fontFamily:"Monaco, Menlo, monospace",color:"#D4D4D4",lineHeight:"1.6",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:o})}):e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"60px 20px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px dashed #E5E5E7"},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.5},children:""}),e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#1D1D1F",marginBottom:"8px"},children:"No Preview Available"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"24px"},children:t?'Click "Refresh Preview" to generate the compiled system prompt':'Save the persona first, then click "Refresh Preview"'})]})}),e.jsx("style",{children:`
          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }
        `})]})},co=({persona:t,onClose:o,onSave:n})=>{const l=!!t,[r,i]=c.useState("identity"),[s,g]=c.useState({name:"",role:"",background:"",traits:[],values:[],expertise:[],style:void 0,modes:[],default_mode:void 0,system_prompt:""});c.useEffect(()=>{t&&g({name:t.name,role:t.role,background:t.background,traits:t.traits||[],values:t.values||[],expertise:t.expertise||[],style:t.style,modes:t.modes||[],default_mode:t.default_mode,system_prompt:t.system_prompt})},[t]);const p=to(),j=ro(),{data:y,refetch:a,isFetching:d}=eo((t==null?void 0:t.id)||""),h=p.isPending||j.isPending,x=(m,v)=>{g(C=>({...C,[m]:v}))},u=async()=>{try{l&&t?await j.mutateAsync({id:t.id,data:s}):await p.mutateAsync(s),n==null||n(),o()}catch(m){console.error("Failed to save persona:",m)}},f=()=>{t!=null&&t.id&&a()},b=[{id:"identity",label:"Identity"},{id:"expertise",label:"Expertise"},{id:"style",label:"Style"},{id:"modes",label:"Modes"},{id:"preview",label:"Preview"}];return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"24px"},onClick:o,children:[e.jsxs("div",{style:{width:"100%",maxWidth:"900px",maxHeight:"90vh",backgroundColor:"#FFFFFF",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #E5E5E7",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#1D1D1F",marginBottom:"4px"},children:l?"Edit Persona":"Create New Persona"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:l?t.name:"Configure a new persona"})]}),e.jsx("button",{type:"button",onClick:o,style:{padding:"8px",backgroundColor:"#F9FAFB",border:"none",borderRadius:"8px",cursor:"pointer",color:"#6B7280"},children:e.jsx(M,{size:20})})]}),e.jsx("div",{style:{display:"flex",gap:"4px",padding:"12px 24px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E5E7",overflowX:"auto"},children:b.map(m=>e.jsx("button",{type:"button",onClick:()=>i(m.id),style:{padding:"8px 16px",backgroundColor:r===m.id?"#FFFFFF":"transparent",color:r===m.id?"#3B82F6":"#6B7280",border:r===m.id?"1px solid #E5E5E7":"none",borderRadius:"8px",fontSize:"14px",fontWeight:r===m.id?500:400,cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.15s"},children:m.label},m.id))}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[r==="identity"&&e.jsx(oo,{name:s.name||"",role:s.role||"",background:s.background||"",traits:s.traits||[],values:s.values||[],onChange:x}),r==="expertise"&&e.jsx(so,{expertise:s.expertise||[],onChange:m=>x("expertise",m)}),r==="style"&&e.jsx(io,{style:s.style,onChange:m=>x("style",m)}),r==="modes"&&e.jsx(lo,{modes:s.modes||[],defaultMode:s.default_mode,onChange:m=>x("modes",m),onDefaultModeChange:m=>x("default_mode",m)}),r==="preview"&&e.jsx(ao,{personaId:t==null?void 0:t.id,compiledPrompt:y==null?void 0:y.compiled_prompt,isLoading:d,onRefresh:f})]}),e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #E5E5E7",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:o,style:{padding:"10px 20px",backgroundColor:"#F9FAFB",border:"1px solid #E5E5E7",borderRadius:"10px",fontSize:"14px",fontWeight:500,color:"#1D1D1F",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:u,disabled:h||!s.name||!s.role,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:!h&&s.name&&s.role?"#3B82F6":"#E5E5E7",color:!h&&s.name&&s.role?"#FFFFFF":"#9CA3AF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:!h&&s.name&&s.role?"pointer":"not-allowed"},children:h?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:16,style:{animation:"spin 1s linear infinite"}}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yr,{size:16}),l?"Update Persona":"Create Persona"]})})]})]}),e.jsx("style",{children:`
          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }
        `})]})},po=()=>{const[t,o]=c.useState(!1),[n,l]=c.useState(void 0),[r,i]=c.useState(null),[s,g]=c.useState(null),{data:p,isLoading:j,error:y,refetch:a}=Zn(),d=no(),h=(p==null?void 0:p.personas)||[],x=h.filter(z=>z.is_built_in),u=h.filter(z=>!z.is_built_in),f=()=>{l(void 0),o(!0)},b=z=>{l(z),o(!0)},m=async z=>{try{g(null),await d.mutateAsync(z),i("Persona deleted successfully"),setTimeout(()=>i(null),3e3)}catch(D){g(D instanceof Error?D.message:"Failed to delete persona")}},v=()=>{a(),i(n?"Persona updated successfully":"Persona created successfully"),setTimeout(()=>i(null),3e3)},C=()=>{o(!1),l(void 0)};return e.jsxs("div",{style:{minHeight:"100%"},children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,color:"#1D1D1F",marginBottom:"8px"},children:"Personas"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Create and manage AI personas with unique characteristics and behaviors"})]}),e.jsxs("button",{onClick:f,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#16A34A"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="#22C55E"},children:[e.jsx(H,{size:18}),e.jsx("span",{children:"Create Persona"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(59, 130, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(te,{size:20,style:{color:"#3B82F6"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Personas"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",fontFamily:"monospace"},children:h.length})]})]}),e.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:"rgba(139, 92, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(te,{size:20,style:{color:"#8B5CF6"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"11px",color:"#9CA3AF",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Custom Personas"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:700,color:"#1D1D1F",fontFamily:"monospace"},children:u.length})]})]})]})]}),r&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(ye,{size:20,style:{color:"#22C55E",flexShrink:0}}),e.jsx("p",{style:{fontSize:"14px",fontWeight:500,color:"#166534"},children:r})]}),(s||y)&&e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",borderRadius:"12px",backgroundColor:"#FEF2F2",border:"1px solid #FECACA",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsx(J,{size:20,style:{color:"#EF4444",flexShrink:0}}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:600,color:"#B91C1C",marginBottom:"4px"},children:"Error"}),e.jsx("p",{style:{fontSize:"13px",color:"#DC2626"},children:s||(y instanceof Error?y.message:"Failed to load personas")})]})]}),j?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px 0"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(L,{size:32,style:{color:"#3B82F6",animation:"spin 1s linear infinite"}})}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280"},children:"Loading personas..."})]})}):h.length===0?e.jsxs("div",{style:{backgroundColor:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E5E7",padding:"60px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:"#F3F4F6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:e.jsx(te,{size:32,style:{color:"#9CA3AF"}})}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"8px"},children:"No Personas Yet"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"24px",maxWidth:"320px",margin:"0 auto 24px"},children:"Get started by creating your first custom persona"}),e.jsx("button",{onClick:f,style:{padding:"10px 20px",backgroundColor:"#22C55E",color:"#FFFFFF",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:500,cursor:"pointer"},children:"Create Persona"})]}):e.jsxs("div",{children:[x.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"16px"},children:["Built-in Personas (",x.length,")"]}),e.jsx(Ae,{personas:x,onEdit:b,onDelete:m})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:600,color:"#1D1D1F",marginBottom:"16px"},children:["Custom Personas (",u.length,")"]}),e.jsx(Ae,{personas:u,onEdit:b,onDelete:m})]}),u.length===0&&x.length>0&&e.jsxs("div",{style:{padding:"24px",backgroundColor:"#F9FAFB",borderRadius:"12px",border:"1px dashed #E5E5E7",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"16px"},children:"No custom personas yet. Create one to get started!"}),e.jsx("button",{onClick:f,style:{padding:"8px 16px",backgroundColor:"#3B82F6",color:"#FFFFFF",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:500,cursor:"pointer"},children:"Create Custom Persona"})]})]}),t&&e.jsx(co,{persona:n,onClose:C,onSave:v}),e.jsx("style",{children:`
          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }
        `})]})},xo=new et({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1,refetchOnWindowFocus:!1}}});function uo({error:t,resetErrorBoundary:o}){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-primary",children:e.jsxs("div",{className:"bg-background-secondary rounded-lg p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-text-secondary mb-4",children:t.message}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors",children:"Try again"})]})})}function ho(){return e.jsx(dt,{FallbackComponent:uo,children:e.jsx(tt,{client:xo,children:e.jsx(st,{children:e.jsx(it,{children:e.jsxs(O,{path:"/",element:e.jsx(Or,{}),children:[e.jsx(O,{index:!0,element:e.jsx(Jr,{})}),e.jsx(O,{path:"chat",element:e.jsx(Kn,{})}),e.jsx(O,{path:"facets",element:e.jsx(nn,{})}),e.jsx(O,{path:"personas",element:e.jsx(po,{})}),e.jsx(O,{path:"knowledge",element:e.jsx(un,{})}),e.jsx(O,{path:"settings",element:e.jsx(Rn,{})}),e.jsx(O,{path:"*",element:e.jsx(lt,{to:"/",replace:!0})})]})})})})})}const Ue=document.getElementById("root");if(!Ue)throw new Error("Root element not found");Ne(Ue).render(e.jsx(c.StrictMode,{children:e.jsx(ho,{})}));
//# sourceMappingURL=index-B79QM18y.js.map
