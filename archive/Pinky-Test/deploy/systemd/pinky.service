# Pinky AI Agent Gateway - systemd Service Unit
#
# Installation (User Service - Recommended):
#   mkdir -p ~/.config/systemd/user
#   cp pinky.service ~/.config/systemd/user/
#   systemctl --user daemon-reload
#   systemctl --user enable pinky
#   systemctl --user start pinky
#
# Installation (System Service):
#   sudo cp pinky.service /etc/systemd/system/
#   sudo systemctl daemon-reload
#   sudo systemctl enable pinky
#   sudo systemctl start pinky
#
# Note: For system service, update User/Group and paths accordingly.

[Unit]
Description=Pinky AI Agent Gateway
Documentation=https://github.com/normanking/pinky
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
ExecStart=%h/.local/bin/pinky
Restart=on-failure
RestartSec=5
TimeoutStopSec=30

# Working directory for tool execution
WorkingDirectory=%h

# Environment configuration
# Create a file at ~/.config/pinky/env with your tokens:
#   TELEGRAM_BOT_TOKEN=your_token
#   DISCORD_BOT_TOKEN=your_token
#   OPENAI_API_KEY=your_key
EnvironmentFile=-%h/.config/pinky/env

# Optional: explicit config path
# Environment=PINKY_CONFIG=%h/.pinky/config.yaml

# Logging - stdout/stderr go to journal
StandardOutput=journal
StandardError=journal
SyslogIdentifier=pinky

# Security hardening (for system service - comment out for user service)
# NoNewPrivileges=true
# ProtectSystem=strict
# ProtectHome=read-only
# PrivateTmp=true
# ProtectKernelTunables=true
# ProtectControlGroups=true

[Install]
WantedBy=default.target
